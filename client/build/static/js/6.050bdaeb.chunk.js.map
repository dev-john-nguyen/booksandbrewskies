{"version":3,"sources":["services/bb/actions.js","components/BB/components/StarRating.js","components/BB/utils/index.js","components/beer/index.js"],"names":["insert_rating","rating","id","a","isEmpty","Object","assign","Error","code","axios","post","console","log","err","insert_comment","name","comment","StarRating","props","handleOnClick","e","itemId","setError","currentTarget","then","obj","setState","catch","state","hover","error","this","checkMark","className","width","height","viewBox","fill","xmlns","fillRule","d","clipRule","starSvg","fullStarSvg","starArray","i","push","key","onClick","onMouseOver","parseInt","style","color","onMouseLeave","React","Component","halfStartSvg","handleStarRating","ratings","length","sum","avgCustomerRating","toFixed","avgCustStarRating","Beer","match","useState","beer","setBeer","formName","setFormName","formComment","setFormComment","commentSuccessObj","setCommentSuccessObj","empty","setEmpty","loading","setLoading","useEffect","get","params","res","data","window","scrollTo","fetchBeer","text","body","myReview","type","imageUrl","description","comments","_id","bio","starRating","custStar","mapComments","map","item","index","src","location","origin","alt","onSubmit","preventDefault","placeholder","onChange","target","value","maxLength","minHeight","role","aria-hidden"],"mappings":"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","file":"static/js/6.050bdaeb.chunk.js","sourcesContent":["import axios from 'axios';\nimport { isEmpty } from 'lodash';\n\nexport const insert_rating = async (rating, id) => {\n\n    if (isEmpty(rating)) throw Object.assign(\n        new Error('No Rating'),\n        { code: 402 }\n    );\n\n    if (isEmpty(id)) throw Object.assign(\n        new Error(\"Id is empty\"),\n        { code: 402 }\n    );\n\n    try {\n        await axios.post('/reviews/rating', { rating, id });\n    } catch (e) {\n        console.log(e)\n        return { err: 'Sorry, we are having issues submitting your rating' };\n    }\n\n    return { rating: rating };\n}\n\nexport const insert_comment = async (name, comment, id) => {\n\n    if (isEmpty(comment)) throw Object.assign(\n        new Error(\"No Comment\"),\n        { code: 402 }\n    );\n\n    if (isEmpty(name)) throw Object.assign(\n        new Error(\"No Name\"),\n        { code: 402 }\n    );\n\n    if (isEmpty(id)) throw Object.assign(\n        new Error(\"Id is Empty\"),\n        { code: 402 }\n    );\n\n\n    try {\n        await axios.post('/reviews/comment', { name, comment, id });\n    } catch (e) {\n        console.log(e)\n        return { err: 'Sorry, we are having issues submitting your comment' };\n    }\n\n    return { name, comment }\n}","import React from 'react'\nimport { insert_rating } from '../../../services/bb/actions';\n\nclass StarRating extends React.Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            rating: 0,\n            hover: 0,\n            error: false\n        }\n    }\n\n    handleOnClick = (e) => {\n\n        const { itemId, setError } = this.props;\n\n        insert_rating(e.currentTarget.name, itemId)\n            .then((obj) => {\n                if (obj.err) return setError();\n                this.setState({ rating: obj.rating });\n            })\n            .catch((e) => {\n                console.log(e)\n                setError();\n            });\n\n    }\n\n\n    render() {\n\n        const { itemId } = this.props;\n\n        const checkMark = (\n            <svg className=\"bi bi-check-circle\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path fillRule=\"evenodd\" d=\"M15.354 2.646a.5.5 0 010 .708l-7 7a.5.5 0 01-.708 0l-3-3a.5.5 0 11.708-.708L8 9.293l6.646-6.647a.5.5 0 01.708 0z\" clipRule=\"evenodd\" />\n                <path fillRule=\"evenodd\" d=\"M8 2.5A5.5 5.5 0 1013.5 8a.5.5 0 011 0 6.5 6.5 0 11-3.25-5.63.5.5 0 11-.5.865A5.472 5.472 0 008 2.5z\" clipRule=\"evenodd\" />\n            </svg>\n        )\n\n        const starSvg = (\n            <svg className=\"bi bi-star\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path fillRule=\"evenodd\" d=\"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.523-3.356c.329-.314.158-.888-.283-.95l-4.898-.696L8.465.792a.513.513 0 00-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767l-3.686 1.894.694-3.957a.565.565 0 00-.163-.505L1.71 6.745l4.052-.576a.525.525 0 00.393-.288l1.847-3.658 1.846 3.658a.525.525 0 00.393.288l4.052.575-2.906 2.77a.564.564 0 00-.163.506l.694 3.957-3.686-1.894a.503.503 0 00-.461 0z\" clipRule=\"evenodd\" />\n            </svg>\n        )\n\n        const fullStarSvg = (\n            <svg className=\"bi bi-star-fill\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.283.95l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z\" />\n            </svg>\n        )\n\n        let starArray = [];\n\n        if (this.state.rating === 0) {\n            for (let i = 1; i < 6; i++) {\n                starArray.push(\n                    <a className=\"p-1 mb-0\"\n                        key={itemId + i}\n                        name={i}\n                        onClick={this.handleOnClick}\n                        onMouseOver={(e) => this.setState({ hover: parseInt(e.currentTarget.name) })}\n                        style={this.state.hover >= i ? { color: '#eabf00' } : {}}\n                    >\n                        {starSvg}\n                    </a>\n                )\n            }\n        } else {\n\n            for (let i = 1; i < 6; i++) {\n                if (this.state.rating >= i) {\n                    starArray.push(<p className=\"p-1 mb-0 rated\" key={itemId + i}>{fullStarSvg}</p>);\n                } else {\n                    starArray.push(<p className=\"p-1 mb-0 rated\" key={itemId + i}>{starSvg}</p>);\n                }\n            }\n\n        }\n\n        return (\n            <div className=\"star d-flex user-star-rating\" onMouseLeave={() => this.setState({ hover: 0 })}>\n                {starArray}\n                {this.state.rating !== 0 && checkMark}\n            </div>\n        )\n    }\n}\n\nexport default StarRating;","import React from 'react';\n\nconst starSvg = (\n    <svg className=\"bi bi-star\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path fillRule=\"evenodd\" d=\"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.523-3.356c.329-.314.158-.888-.283-.95l-4.898-.696L8.465.792a.513.513 0 00-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767l-3.686 1.894.694-3.957a.565.565 0 00-.163-.505L1.71 6.745l4.052-.576a.525.525 0 00.393-.288l1.847-3.658 1.846 3.658a.525.525 0 00.393.288l4.052.575-2.906 2.77a.564.564 0 00-.163.506l.694 3.957-3.686-1.894a.503.503 0 00-.461 0z\" clipRule=\"evenodd\" />\n    </svg>\n)\n\nconst fullStarSvg = (\n    <svg className=\"bi bi-star-fill\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.283.95l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z\" />\n    </svg>\n)\n\nconst halfStartSvg = (\n    <svg className=\"bi bi-star-half\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path fillRule=\"evenodd\" d=\"M5.354 5.119L7.538.792A.516.516 0 018 .5c.183 0 .366.097.465.292l2.184 4.327 4.898.696A.537.537 0 0116 6.32a.55.55 0 01-.17.445l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256a.519.519 0 01-.146.05c-.341.06-.668-.254-.6-.642l.83-4.73L.173 6.765a.55.55 0 01-.171-.403.59.59 0 01.084-.302.513.513 0 01.37-.245l4.898-.696zM8 12.027c.08 0 .16.018.232.056l3.686 1.894-.694-3.957a.564.564 0 01.163-.505l2.906-2.77-4.052-.576a.525.525 0 01-.393-.288L8.002 2.223 8 2.226v9.8z\" clipRule=\"evenodd\" />\n    </svg>\n)\n\n\nexport const handleStarRating = (ratings) => {\n            //calc customer rating avg\n\n            if(ratings.length < 1){\n                ratings.push(0)\n            }\n            let sum = 0;\n            for (let i = 0; i < ratings.length; i++) {\n                sum += parseInt(ratings[i], 10);\n            }\n\n            let avgCustomerRating = sum / ratings.length;\n\n            avgCustomerRating % 1 !== 0 && (avgCustomerRating = avgCustomerRating.toFixed(1))\n\n            let avgCustStarRating = [];\n\n            for (let i = 1; i < 6; i++) {\n                if (avgCustomerRating >= i) {\n                    avgCustStarRating.push(<p className=\"p-1\" key={'avg' + i}>{fullStarSvg}</p>);\n                } else {\n                    if (avgCustomerRating <= (i - .5) && avgCustomerRating > (i - 1)) {\n                        avgCustStarRating.push(<p className=\"p-1\" key={'avg' + i}>{halfStartSvg}</p>);\n                    } else {\n                        avgCustStarRating.push(<p className=\"p-1\" key={'avg' + i}>{starSvg}</p>);\n                    }\n                }\n            }\n\n            return {avgCustomerRating, avgCustStarRating}\n}","import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport Spinner from '../spinner';\nimport { handleStarRating } from '../BB/utils';\nimport { isEmpty } from 'lodash';\nimport StarRating from '../BB/components/StarRating';\nimport { insert_comment } from '../../services/bb/actions';\nimport NotFoundPage from '../NotFoundPage';\n\nconst Beer = ({ match }) => {\n    const [beer, setBeer] = useState();\n    const [error, setError] = useState(false);\n    const [formName, setFormName] = useState('');\n    const [formComment, setFormComment] = useState('');\n    const [commentSuccessObj, setCommentSuccessObj] = useState({});\n    const [empty, setEmpty] = useState(false);\n    const [loading, setLoading] = useState(false);\n\n    const handleFormSubmit = (e) => {\n        e.preventDefault();\n        setLoading(true);\n\n        if (isEmpty(formName) || isEmpty(formComment)) {\n            setEmpty(true);\n            setLoading(false);\n            return;\n        }\n\n        insert_comment(formName, formComment, beer._id)\n            .then((obj) => {\n                setCommentSuccessObj({ name: obj.name, comment: obj.comment });\n                setFormComment('');\n                setLoading(false);\n            })\n            .catch((err) => {\n                console.log(err);\n                setError(true);\n                setLoading(false);\n            });\n    }\n\n    useEffect(() => {\n        window.scrollTo(0, 0);\n\n        async function fetchBeer() {\n            await axios.get('/reviews/beer', { params: { id: match.params.id } })\n                .then((res) => {\n                    setBeer(res.data);\n                })\n                .catch((err) => {\n                    setError(true)\n                })\n        }\n\n        fetchBeer();\n\n    }, [match.params.id])\n\n    if (error) return <NotFoundPage text='Oops! Something went wrong.' body=\"Couldn't find what you were looking for\" />\n\n\n    if (beer) {\n        const { myReview, ratings, type, name, imageUrl, description, comments, _id, bio, style } = beer;\n        const { rating, comment } = myReview;\n\n        const starSvg = (\n            <svg className=\"bi bi-star\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path fillRule=\"evenodd\" d=\"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.523-3.356c.329-.314.158-.888-.283-.95l-4.898-.696L8.465.792a.513.513 0 00-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767l-3.686 1.894.694-3.957a.565.565 0 00-.163-.505L1.71 6.745l4.052-.576a.525.525 0 00.393-.288l1.847-3.658 1.846 3.658a.525.525 0 00.393.288l4.052.575-2.906 2.77a.564.564 0 00-.163.506l.694 3.957-3.686-1.894a.503.503 0 00-.461 0z\" clipRule=\"evenodd\" />\n            </svg>\n        )\n\n        const fullStarSvg = (\n            <svg className=\"bi bi-star-fill\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.283.95l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z\" />\n            </svg>\n        )\n\n        const halfStartSvg = (\n            <svg className=\"bi bi-star-half\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path fillRule=\"evenodd\" d=\"M5.354 5.119L7.538.792A.516.516 0 018 .5c.183 0 .366.097.465.292l2.184 4.327 4.898.696A.537.537 0 0116 6.32a.55.55 0 01-.17.445l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256a.519.519 0 01-.146.05c-.341.06-.668-.254-.6-.642l.83-4.73L.173 6.765a.55.55 0 01-.171-.403.59.59 0 01.084-.302.513.513 0 01.37-.245l4.898-.696zM8 12.027c.08 0 .16.018.232.056l3.686 1.894-.694-3.957a.564.564 0 01.163-.505l2.906-2.77-4.052-.576a.525.525 0 01-.393-.288L8.002 2.223 8 2.226v9.8z\" clipRule=\"evenodd\" />\n            </svg>\n        )\n\n        let starRating = [];\n\n        for (let i = 1; i < 6; i++) {\n            if (rating >= i) {\n                starRating.push(<p className=\"p-1\" key={i}>{fullStarSvg}</p>);\n            } else {\n                if (rating.rating <= (i - .5) && rating.rating > (i - 1)) {\n                    starRating.push(<p className=\"p-1\" key={i}>{halfStartSvg}</p>);\n                } else {\n                    starRating.push(<p className=\"p-1\" key={i}>{starSvg}</p>);\n                }\n            }\n        }\n\n        const custStar = handleStarRating(ratings);\n\n        if (!isEmpty(commentSuccessObj)) {\n            comments.push(commentSuccessObj);\n            setCommentSuccessObj({});\n        }\n\n        let mapComments = [];\n\n        if (!isEmpty(comments)) {\n            mapComments = comments.map((item, index) => {\n                return (\n                    <div className=\"beer__comments_item\" key={index}>\n                        <img src={window.location.origin + \"/media/logo.png\"} className=\"mr-3\" alt=\"BB\" />\n                        <div className=\"beer__comments_item-text\">\n                            <p className=\"mt-0 mb-0\">{item.name}</p>\n                            <p>{item.comment}</p>\n                        </div>\n                    </div>\n                )\n            });\n        }\n\n        return (\n            <div className=\"beer\">\n                <div className=\"beer__header\">\n                    <div className=\"beer__text\">\n                        <h1>{name}</h1>\n                    </div>\n                </div>\n                <div className=\"beer__content\">\n                    <div className=\"beer__content__section\">\n                        <div className=\"beer__content__img\" >\n                            <img src={imageUrl} className=\"img-fluid rounded shadow\" alt=\"item\" style={{\n                                width: '400px',\n                                height: '505px'\n                            }} />\n                        </div>\n                        <div className=\"beer__content__text\">\n                            <h2 className=\"beer__content_title\">{name}</h2>\n                            <div className=\"d-flex\">Type: <p className=\"mb-2 ml-2 text-capitalize\">{type}</p></div>\n                            <div className=\"d-flex\">Style: <p className=\"mb-2 ml-2 text-capitalize\">{style}</p></div>\n                            <div className=\"d-flex\">From: <p className=\"mb-2 ml-2\">{description}</p></div>\n                            <div className=\"d-flex\"><p>Our<br />Rating:</p><div className=\"beer__content_star d-flex mb-2 ml-2\">{starRating}<p>{rating}</p></div></div>\n                            <div className=\"d-flex\"><p>Average<br />Rating:</p><div className=\"beer__content_star d-flex mb-2 ml-2\">{custStar.avgCustStarRating}<p>{custStar.avgCustomerRating}</p></div></div>\n                            <div className=\"d-flex\">Our<br />Comment:<p className=\"mb-2 ml-2 text-capitalize\">{comment}</p></div>\n                            <div className=\"d-flex\">Description:<p className=\"mb-2 ml-2 text-capitalize\">{bio}</p></div>\n                        </div>\n                    </div>\n                    <div className=\"beer__comments\">\n                        {(!isEmpty(mapComments)) ? mapComments : <p>No Comments</p>}\n                    </div>\n                    <div className=\"beer__comment-form\">\n                        {empty && <p className=\"text-danger\">Please fill out all fields</p>}\n                        <form onSubmit={handleFormSubmit}>\n                            <div className=\"form-group\">\n                                <input type=\"text\"\n                                    className=\"form-control\"\n                                    placeholder=\"Name\" name=\"Name\"\n                                    onChange={(e) => setFormName(e.target.value)}\n                                    value={formName}\n                                />\n                            </div>\n\n                            <div className=\"form-group\">\n                                <textarea type=\"text\"\n                                    className=\"form-control\"\n                                    maxLength='500'\n                                    placeholder=\"What do you think?\"\n                                    name=\"Comment\"\n                                    onChange={(e) => setFormComment(e.target.value)}\n                                    value={formComment} style={{ minHeight: '150px' }}\n                                />\n                            </div>\n                            <div className=\"beer__footer\">\n                                <p>Rating</p>\n                                <div className=\"beer__footer_star\"><StarRating itemId={_id} setError={() => setError(true)} /></div>\n                                <button type=\"submit\" className='btn btn-primary btn-block'>\n                                    {loading && <span className=\"spinner-border spinner-border-sm mb-1\" role=\"status\" aria-hidden=\"true\"></span>}\n                                        Submit\n                                        </button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n    return <Spinner />;\n}\n\nexport default Beer;"],"sourceRoot":""}