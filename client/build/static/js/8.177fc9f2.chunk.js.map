{"version":3,"sources":["components/BB/utils/index.js","components/BB/index.js"],"names":["starSvg","className","width","height","viewBox","fill","xmlns","fillRule","d","clipRule","fullStarSvg","halfStartSvg","handleStarRating","ratings","length","push","sum","i","parseInt","avgCustomerRating","toFixed","avgCustStarRating","key","BB","props","componentDidMount","a","window","scrollTo","axios","get","reviewItems","console","log","setState","error","loading","data","state","itemObj","filterBB","this","text","body","isEmpty","review","filter","item","type","map","index","starRating","myReview","rating","_id","custRating","to","src","imageUrl","alt","name","style","description","reverse","recentReviews","home","handleFilterButtonClass","base","data-toggle","onClick","React","Component"],"mappings":"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","file":"static/js/8.177fc9f2.chunk.js","sourcesContent":["import React from 'react';\n\nconst starSvg = (\n    <svg className=\"bi bi-star\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path fillRule=\"evenodd\" d=\"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.523-3.356c.329-.314.158-.888-.283-.95l-4.898-.696L8.465.792a.513.513 0 00-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767l-3.686 1.894.694-3.957a.565.565 0 00-.163-.505L1.71 6.745l4.052-.576a.525.525 0 00.393-.288l1.847-3.658 1.846 3.658a.525.525 0 00.393.288l4.052.575-2.906 2.77a.564.564 0 00-.163.506l.694 3.957-3.686-1.894a.503.503 0 00-.461 0z\" clipRule=\"evenodd\" />\n    </svg>\n)\n\nconst fullStarSvg = (\n    <svg className=\"bi bi-star-fill\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.283.95l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z\" />\n    </svg>\n)\n\nconst halfStartSvg = (\n    <svg className=\"bi bi-star-half\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path fillRule=\"evenodd\" d=\"M5.354 5.119L7.538.792A.516.516 0 018 .5c.183 0 .366.097.465.292l2.184 4.327 4.898.696A.537.537 0 0116 6.32a.55.55 0 01-.17.445l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256a.519.519 0 01-.146.05c-.341.06-.668-.254-.6-.642l.83-4.73L.173 6.765a.55.55 0 01-.171-.403.59.59 0 01.084-.302.513.513 0 01.37-.245l4.898-.696zM8 12.027c.08 0 .16.018.232.056l3.686 1.894-.694-3.957a.564.564 0 01.163-.505l2.906-2.77-4.052-.576a.525.525 0 01-.393-.288L8.002 2.223 8 2.226v9.8z\" clipRule=\"evenodd\" />\n    </svg>\n)\n\n\nexport const handleStarRating = (ratings) => {\n            //calc customer rating avg\n\n            if(ratings.length < 1){\n                ratings.push(0)\n            }\n            let sum = 0;\n            for (let i = 0; i < ratings.length; i++) {\n                sum += parseInt(ratings[i], 10);\n            }\n\n            let avgCustomerRating = sum / ratings.length;\n\n            avgCustomerRating % 1 !== 0 && (avgCustomerRating = avgCustomerRating.toFixed(1))\n\n            let avgCustStarRating = [];\n\n            for (let i = 1; i < 6; i++) {\n                if (avgCustomerRating >= i) {\n                    avgCustStarRating.push(<p className=\"p-1\" key={'avg' + i}>{fullStarSvg}</p>);\n                } else {\n                    if (avgCustomerRating <= (i - .5) && avgCustomerRating > (i - 1)) {\n                        avgCustStarRating.push(<p className=\"p-1\" key={'avg' + i}>{halfStartSvg}</p>);\n                    } else {\n                        avgCustStarRating.push(<p className=\"p-1\" key={'avg' + i}>{starSvg}</p>);\n                    }\n                }\n            }\n\n            return {avgCustomerRating, avgCustStarRating}\n}","import React from 'react';\nimport { isEmpty } from 'lodash';\nimport axios from 'axios';\nimport NotFoundPage from '../NotFoundPage';\nimport Spinner from '../spinner';\nimport { handleStarRating } from './utils';\nimport { Link } from 'react-router-dom';\n\nclass BB extends React.Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            reviewItems: [],\n            error: false,\n            loading: true,\n            itemObj: {},\n            filterBB: 'all'\n        }\n    }\n\n    componentDidMount = async () => {\n\n        window.scrollTo(0, 0);\n\n        let reviewItems;\n\n        try {\n            reviewItems = await axios.get('/reviews');\n        } catch (e) {\n            console.log(e)\n            return this.setState({ error: true, loading: false })\n        }\n\n        this.setState({ reviewItems: reviewItems.data, loading: false });\n\n    }\n\n    render() {\n\n        const starSvg = (\n            <svg className=\"bi bi-star\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path fillRule=\"evenodd\" d=\"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.523-3.356c.329-.314.158-.888-.283-.95l-4.898-.696L8.465.792a.513.513 0 00-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767l-3.686 1.894.694-3.957a.565.565 0 00-.163-.505L1.71 6.745l4.052-.576a.525.525 0 00.393-.288l1.847-3.658 1.846 3.658a.525.525 0 00.393.288l4.052.575-2.906 2.77a.564.564 0 00-.163.506l.694 3.957-3.686-1.894a.503.503 0 00-.461 0z\" clipRule=\"evenodd\" />\n            </svg>\n        )\n\n        const fullStarSvg = (\n            <svg className=\"bi bi-star-fill\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.283.95l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z\" />\n            </svg>\n        )\n\n        const halfStartSvg = (\n            <svg className=\"bi bi-star-half\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path fillRule=\"evenodd\" d=\"M5.354 5.119L7.538.792A.516.516 0 018 .5c.183 0 .366.097.465.292l2.184 4.327 4.898.696A.537.537 0 0116 6.32a.55.55 0 01-.17.445l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256a.519.519 0 01-.146.05c-.341.06-.668-.254-.6-.642l.83-4.73L.173 6.765a.55.55 0 01-.171-.403.59.59 0 01.084-.302.513.513 0 01.37-.245l4.898-.696zM8 12.027c.08 0 .16.018.232.056l3.686 1.894-.694-3.957a.564.564 0 01.163-.505l2.906-2.77-4.052-.576a.525.525 0 01-.393-.288L8.002 2.223 8 2.226v9.8z\" clipRule=\"evenodd\" />\n            </svg>\n        )\n\n\n        if (this.state.loading) return <Spinner />;\n\n        if (this.state.error) return <NotFoundPage text=\"Oops! Something Happened\" body=\"Sorry, we are undergoing maintenance. Check back again later.\" />\n\n        if (isEmpty(this.state.reviewItems)) return <NotFoundPage text=\"Empty\" body=\"Looks like we weren't able to find any items. Please come back later.\" />\n\n        const review = this.state.reviewItems.filter((item) => {\n            if (this.state.filterBB === 'all') {\n                return true;\n            } else if (item.type === this.state.filterBB) {\n                return true;\n            } else {\n                return false;\n            }\n        }).map((item, index) => {\n            let starRating = [];\n\n            for (let i = 1; i < 6; i++) {\n                if (item.myReview.rating >= i) {\n                    starRating.push(<p className=\"p-1\" key={item._id + i}>{fullStarSvg}</p>);\n                } else {\n                    if (item.myReview.rating <= (i - .5) && item.myReview.rating > (i - 1)) {\n                        starRating.push(<p className=\"p-1\" key={item._id + i}>{halfStartSvg}</p>);\n                    } else {\n                        starRating.push(<p className=\"p-1\" key={item._id + i}>{starSvg}</p>);\n                    }\n                }\n            }\n\n            const custRating = handleStarRating(item.ratings);\n\n            return (\n                <div className=\"reviews__item\" key={index}>\n                    <Link to={`/bb/${item._id}`}>\n                        <img className=\"reviews__item__img\" src={item.imageUrl} alt={item.name} width='250' height='350' key={index} style={{ height: '350px' }} />\n                    </Link>\n                    <div className=\"reviews__item__content\">\n                        <h3>{item.name}</h3>\n                        <p>From: {item.description}</p>\n                        <div className=\"reviews__item__rating\">\n                            <p>Our<br />Rating:</p>\n                            <div className=\"reviews__item__stars\">\n                                {starRating}\n                                <div>{item.myReview.rating}</div>\n                            </div>\n                        </div>\n                        <div className=\"reviews__item__average\">\n                            <p>Average<br />rating:</p>\n                            <div className=\"reviews__item__stars\">\n                                {custRating.avgCustStarRating}\n                                <p>{custRating.avgCustomerRating}</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )\n        })\n\n        //reverse array\n        review.reverse();\n\n        const recentReviews = this.state.reviewItems.filter((item) => {\n            if (item.home) {\n                return true;\n            } else {\n                return false;\n            }\n        }).map((item, index) => {\n            let starRating = [];\n\n            for (let i = 1; i < 6; i++) {\n                if (item.myReview.rating >= i) {\n                    starRating.push(<p className=\"p-1\" key={item._id + i}>{fullStarSvg}</p>);\n                } else {\n                    if (item.myReview.rating <= (i - .5) && item.myReview.rating > (i - 1)) {\n                        starRating.push(<p className=\"p-1\" key={item._id + i}>{halfStartSvg}</p>);\n                    } else {\n                        starRating.push(<p className=\"p-1\" key={item._id + i}>{starSvg}</p>);\n                    }\n                }\n            }\n\n            const custRating = handleStarRating(item.ratings);\n\n            return (\n                <div className=\"reviews__item\" key={index}>\n                    <h1 className=\"reviews__item__h1\">{item.type === 'book' ? 'Book Of The Month' : 'Beer Of The Week'}</h1>\n                    <Link to={`/bb/${item._id}`}>\n                        <img className=\"reviews__item__img\" src={item.imageUrl} alt={item.name} width='250' height='350' />\n                    </Link>\n                    <div className=\"reviews__item__content\">\n                        <h3>{item.name}</h3>\n                        <p>From: {item.description}</p>\n                        <div className=\"reviews__item__rating\">\n                            <p>Our<br />Rating:</p>\n                            <div className=\"reviews__item__stars\">\n                                {starRating}\n                                <p>{item.myReview.rating}</p>\n                            </div>\n                        </div>\n                        <div className=\"reviews__item__average\">\n                            <p>Average<br />rating:</p>\n                            <div className=\"reviews__item__stars\">\n                                {custRating.avgCustStarRating}\n                                <p>{custRating.avgCustomerRating}</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )\n        })\n\n        const handleFilterButtonClass = (name) => {\n            var base = \"reviews__filter__button\";\n            if (name === this.state.filterBB) {\n                return base + ' active'\n            } else {\n                return base;\n            }\n        }\n\n        return (\n            <>\n                <div className=\"reviews\">\n                    <div className=\"reviews__header\">\n                        <div className=\"reviews__text\">\n                            <h1>Reviews</h1>\n                        </div>\n                    </div>\n                    <div className=\"reviews__recent\">\n                        {recentReviews}\n                    </div>\n                    <div className=\"reviews__filter\">\n                        <div className=\"reviews__filter__content\" data-toggle=\"buttons\">\n                            <p>Filter :</p>\n                            <button className={handleFilterButtonClass('book')} onClick={() => this.setState({ filterBB: 'book' })}>\n                                Books\n                        </button>\n                            <button className={handleFilterButtonClass('all')} onClick={() => this.setState({ filterBB: 'all' })}>\n                                All\n                         </button>\n                            <button className={handleFilterButtonClass('beer')} onClick={() => this.setState({ filterBB: 'beer' })}>\n                                Beers\n                        </button>\n                        </div>\n                    </div>\n                    <div className=\"reviews__items\">\n                        {review}\n                    </div>\n                </div>\n            </>\n        )\n    }\n}\n\nexport default BB;"],"sourceRoot":""}