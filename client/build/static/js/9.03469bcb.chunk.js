(this.webpackJsonpbeersandbrewskies=this.webpackJsonpbeersandbrewskies||[]).push([[9],{271:function(e,t,a){"use strict";a.r(t);var n=a(29),r=a.n(n),l=a(49),o=a(17),m=a(0),i=a.n(m),c=a(38),s=a(20),u=a(21),d=a(23),p=a(22),h=a(48),f=a.n(h),g=a(35),b=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleInputChanges=function(e){"bbImage"===e.target.name?n.setState(Object(c.a)({},e.target.name,e.target.files[0])):n.setState(Object(c.a)({},e.target.name,e.target.value))},n.handleFormSubmit=function(){var e=Object(l.a)(r.a.mark((function e(t){var a,l,o,m,i,c,s,u,d,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=n.state,l=a.imageUrl,o=a.type,m=a.name,i=a.description,c=a.rating,s=a.comment,u=a.style,d=a.bio,a.validImage){e.next=4;break}return e.abrupt("return",alert("Looks like the image url is invalid. Please make sure the image displays"));case 4:if(""!==o&&""!==c){e.next=7;break}return alert("Rating Or Type Is Empty"),e.abrupt("return");case 7:return p={type:o,name:m,description:i,rating:c,comment:s,style:u,bio:d,imageUrl:l},e.next=10,f.a.post("/upload/reviews",p).then((function(e){return console.log(e),n.setState({success:[!0,"Item Added"],type:"",name:"",description:"",rating:"",comment:"",bbImage:""})})).catch((function(e){return console.log(e),n.setState({error:[!0,"Failed To Upload"]})}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={imageUrl:"",type:"",name:"",description:"",rating:"",comment:"",bio:"",style:"",error:[!1,""],success:!1,validImage:!1},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.description,r=t.comment,l=t.style,o=t.bio,m=t.success,c=t.error,s=this.props.handleClose;return c[0]?i.a.createElement(g.a,{showValue:!0,closeDirect:"/men",buttonName:"Close",title:"Error",description:c[1],svgType:"error",handleState:function(){return e.setState({error:[!1,""]})}}):m?i.a.createElement(g.a,{showValue:!0,buttonName:"Close",title:"Item Added",description:"",svgType:"success",handleState:function(){return e.setState({success:!1})}}):i.a.createElement("div",{className:"admin-form"},i.a.createElement("div",{className:"admin-form__content"},i.a.createElement("div",{className:"admin-form__title"},i.a.createElement("h1",null,a),i.a.createElement("figure",{className:"admin-form__close",onClick:s},"X")),i.a.createElement("div",{className:"admin-form__body"},i.a.createElement("img",{className:"img-fluid rounded shadow",src:this.state.imageUrl,alt:"Invalid Url",width:"250px",height:"350px",onLoad:function(){return e.setState({validImage:!0})},onError:function(){return e.setState({validImage:!1})},style:{width:"250px",height:"350px"}}),i.a.createElement("h4",{className:"mt-3"},"New Item"),i.a.createElement("form",{className:"uploadBB-form text-left",onSubmit:this.handleFormSubmit,encType:"multipart/form-data"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"type"},"Type Of Item"),i.a.createElement("select",{name:"type",id:"type",className:"form-control",onChange:this.handleInputChanges,required:!0},i.a.createElement("option",{value:"",defaultValue:!0},"Type"),i.a.createElement("option",{value:"beer"},"Beer"),i.a.createElement("option",{value:"book"},"Book"))),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"imageUrl"},"Image Url"),i.a.createElement("input",{type:"text",className:"form-control",name:"imageUrl",id:"imageUrl",placeholder:"Copied Image Url",onBlur:this.handleInputChanges,required:!0})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"name"},"Name"),i.a.createElement("input",{type:"text",className:"form-control",name:"name",id:"name",placeholder:"Name",value:a,onChange:this.handleInputChanges,required:!0})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"description"},"Where is it from?"),i.a.createElement("input",{type:"text",className:"form-control",name:"description",id:"description",placeholder:"Where it's from",value:n,onChange:this.handleInputChanges,required:!0})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"style"},"Style of Beer or Book"),i.a.createElement("input",{type:"text",className:"form-control",name:"style",id:"style",placeholder:"Style of beer or book",value:l,onChange:this.handleInputChanges,required:!0})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"bio"},"Description Of The Beer or Book"),i.a.createElement("textarea",{type:"text",className:"form-control",name:"bio",id:"bio",placeholder:"Description of the beer or book",value:o,onChange:this.handleInputChanges,required:!0})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"rating"},"What's your rating?"),i.a.createElement("select",{name:"rating",className:"form-control",id:"rating",onChange:this.handleInputChanges,required:!0},i.a.createElement("option",{value:"",defaultValue:!0},"Rating"),i.a.createElement("option",{value:"1"},"1"),i.a.createElement("option",{value:"2"},"2"),i.a.createElement("option",{value:"3"},"3"),i.a.createElement("option",{value:"4"},"4"),i.a.createElement("option",{value:"5"},"5"))),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"comment"},"What do you think about it?"),i.a.createElement("textarea",{type:"text",className:"form-control",name:"comment",id:"comment",placeholder:"Any Comments?",value:r,onChange:this.handleInputChanges,required:!0})),i.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block"},"Submit"))),i.a.createElement("div",{className:"admin-form__footer"},i.a.createElement("button",{className:"btn btn-block btn-outline-danger",onClick:s},"Cancel"))))}}]),a}(i.a.Component),E=a(61),v=a(199),y=a(36),N=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).handleFormSubmit=function(){var e=Object(l.a)(r.a.mark((function e(t){var a,l,o,m,i,c,s,u,d,p,h,g;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=n.state,l=a.imageUrl,o=a.type,m=a.name,i=a.description,c=a.rating,s=a.comment,u=a.bio,d=a.home,p=a.style,h=a._id,a.validImage){e.next=4;break}return e.abrupt("return",alert("Looks like the image url is invalid. Please make sure the image displays"));case 4:return g={imageUrl:l,type:o,name:m,description:i,rating:c,comment:s,bio:u,home:d,style:p,_id:h},e.next=7,f.a.post("/men/reviews/update",g).then((function(e){if(!e.data.updated)throw new Error("Faild to update");alert("Successfully updated ".concat(e.data.name)),window.location.replace("/men")})).catch((function(e){console.log(e),alert("failed")}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleInputChanges=function(e){n.setState(Object(c.a)({},e.target.name,e.target.value))},n.handleOnDelete=Object(l.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete ".concat(n.state.name,"?"))){e.next=3;break}return e.next=3,f.a.post("/men/reviews/delete",{_id:n.state._id}).then((function(e){if(!e.data.deleted)throw new Error("return updated as false");alert("Successfully deleted ".concat(e.data.name)),window.location.replace("/men")})).catch((function(e){console.log(e),alert("Failed to delete item")}));case 3:case"end":return e.stop()}}),e)})));var o=e.editItem,m=o.name,i=o.description,u=o.imageUrl,d=o.bio,p=o.style,h=o.myReview,g=o.type,b=o.home,E=o._id;return n.state={_id:E,imageUrl:u,type:g,name:m,description:i,rating:h.rating,comment:h.comment,bio:d,home:b,style:p,error:[!1,""],success:!1,validImage:!1},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.handleClose,a=this.state,n=a.name,r=a.description,l=a.imageUrl,o=a.bio,m=a.style,c=a.comment,s=a.rating,u=a.type,d=a.home;return i.a.createElement("div",{className:"admin-form"},i.a.createElement("div",{className:"admin-form__content"},i.a.createElement("div",{className:"admin-form__title"},i.a.createElement("figure",{className:"admin-form__close",onClick:t},"X")),i.a.createElement("div",{className:"admin-form__body"},i.a.createElement("img",{className:"img-fluid rounded shadow",src:l,alt:n,width:"250",height:"350",style:{height:"350px"},onLoad:function(){return e.setState({validImage:!0})},onError:function(){return e.setState({validImage:!1})}}),i.a.createElement("br",null),i.a.createElement("h4",{className:"mt-3"},n),i.a.createElement("form",{className:"uploadBB-form text-left",onSubmit:this.handleFormSubmit,encType:"multipart/form-data"},i.a.createElement("div",{className:"form-check mb-2"},i.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"home",name:"home",defaultChecked:d,onChange:function(t){return e.setState({home:t.target.checked})}}),i.a.createElement("label",{className:"form-check-label",htmlFor:"home"},"Display On Home Page?")),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"imageUrl"},"Type Of Item"),i.a.createElement("select",{name:"type",id:"type",className:"form-control",defaultValue:u,onChange:this.handleInputChanges,required:!0},i.a.createElement("option",{value:"beer"},"Beer"),i.a.createElement("option",{value:"book"},"Book"))),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"imageUrl"},"Copy Image Url"),i.a.createElement("input",{type:"text",className:"form-control",name:"imageUrl",id:"imageUrl",placeholder:"Copied Image Url",defaultValue:l,onBlur:this.handleInputChanges,required:!0})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"name"},"Name"),i.a.createElement("input",{type:"text",className:"form-control",name:"name",id:"name",placeholder:"Name",defaultValue:n,onChange:this.handleInputChanges,required:!0})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"description"},"Where is it from?"),i.a.createElement("input",{type:"text",className:"form-control",name:"description",id:"description",placeholder:"Where it's from",defaultValue:r,onChange:this.handleInputChanges,required:!0})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"style"},"Style of Beer or Book"),i.a.createElement("input",{type:"text",className:"form-control",name:"style",id:"style",placeholder:"Style of beer or book",defaultValue:m,onChange:this.handleInputChanges,required:!0})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"bio"},"Description Of The Beer or Book"),i.a.createElement("textarea",{type:"text",className:"form-control",name:"bio",id:"bio",placeholder:"Description of the beer or book",defaultValue:o,onChange:this.handleInputChanges,required:!0})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"rating"},"What's your rating?"),i.a.createElement("select",{name:"rating",id:"rating",className:"form-control",defaultValue:s,onChange:this.handleInputChanges,required:!0},i.a.createElement("option",{value:"1"},"1"),i.a.createElement("option",{value:"2"},"2"),i.a.createElement("option",{value:"3"},"3"),i.a.createElement("option",{value:"4"},"4"),i.a.createElement("option",{value:"5"},"5"))),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"comment"},"What do you think about it?"),i.a.createElement("textarea",{type:"text",className:"form-control",name:"comment",id:"comment",placeholder:"Any Comments?",defaultValue:c,onChange:this.handleInputChanges,required:!0})),i.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block"},"Submit"))),i.a.createElement("div",{className:"admin-form__footer"},i.a.createElement("button",{className:"btn btn-block btn-outline-danger",onClick:this.handleOnDelete},"Delete"))))}}]),a}(i.a.Component);t.default=function(){var e=Object(m.useState)(!1),t=Object(o.a)(e,2),a=t[0],n=t[1],c=Object(m.useState)([]),s=Object(o.a)(c,2),u=s[0],d=s[1],p=Object(m.useState)(!1),h=Object(o.a)(p,2),g=h[0],w=h[1],k=Object(m.useState)(!1),C=Object(o.a)(k,2),x=C[0],I=C[1],O=Object(m.useState)(["Bigleftnut"===localStorage.getItem("password"),"Bigleftnut"]),S=Object(o.a)(O,2),_=S[0],j=S[1],F=Object(m.useState)(localStorage.getItem("password")),U=Object(o.a)(F,2),B=U[0],q=U[1],D=Object(m.useState)(),V=Object(o.a)(D,2),T=V[0],A=V[1];Object(m.useEffect)((function(){function e(){return(e=Object(l.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("/men/reviews/get");case 3:t=e.sent,e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",w(!0));case 10:console.log("fetching..."),d(t.data),I(!1);case 13:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}_[0]&&(I(!0),function(){e.apply(this,arguments)}())}),[_]);if(!_[0])return i.a.createElement("div",{className:"admin"},i.a.createElement("div",{className:"admin__login"},i.a.createElement("form",{onSubmit:function(e){e.preventDefault(),B===_[1]?(localStorage.setItem("password",_[1]),j([!0])):alert("incorrect")},style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"320px"}},i.a.createElement("h1",{className:"text-center"},"Only Men"),i.a.createElement("input",{type:"password",className:"form-control mt-4",name:"password",value:B,onChange:function(e){return q(e.target.value)}}),i.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block mt-4"},"Login"))));if(g)return i.a.createElement(E.default,{text:"Oops! Something Happened",body:"Sorry, looks like it failed to retrieve the items"});if(x)return i.a.createElement(y.a,null);var L=i.a.createElement("svg",{width:"2.5em",height:"2.5em",viewBox:"0 0 16 16",className:"bi bi-pencil-square",fill:"white",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",left:"40%",top:"40%"}},i.a.createElement("path",{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456l-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"}),i.a.createElement("path",{fillRule:"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"})),W=i.a.createElement("svg",{width:"5em",height:"5em",viewBox:"0 0 16 16",className:"bi bi-plus",fill:"white",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("path",{fillRule:"evenodd",d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})),M=u.map((function(e,t){return i.a.createElement("div",{className:"men-reviews m-3 p-2 d-flex align-items-center flex-column",style:{width:"220px"},key:t},i.a.createElement("div",{className:"men-a",style:{position:"relative"},onClick:function(){return A(e)}},i.a.createElement("div",{className:"men-edit"},L),i.a.createElement("img",{className:"img-fluid rounded shadow",src:e.imageUrl,alt:e.name,width:"250",height:"350",style:{height:"350px"}})),i.a.createElement("div",{className:"item-content mt-4"},i.a.createElement("h3",null,e.name),i.a.createElement("p",null,"From: ",e.description)))}));return M.reverse(),i.a.createElement(i.a.Fragment,null,!Object(v.isEmpty)(T)&&i.a.createElement(N,{editItem:T,handleClose:function(){return A("")}}),a&&i.a.createElement(b,{handleClose:function(){return n(!1)}}),i.a.createElement("div",{className:"admin"},i.a.createElement("div",{className:"admin__header"},i.a.createElement("div",{className:"admin__text"},i.a.createElement("h1",null,"Make Changes"))),Object(v.isEmpty)(u)?i.a.createElement("div",null,"Loading..."):i.a.createElement("div",{className:"admin__items"},i.a.createElement("div",{className:"men-reviews m-3 p-2 d-flex align-items-center flex-column",style:{width:"220px"}},i.a.createElement("div",{className:"men-a",style:{position:"relative"},onClick:function(){return n(!0)}},i.a.createElement("div",{className:"men-edit"},L),i.a.createElement("div",{className:"men-reviews shadow rounded",style:{width:"200px",height:"350px",background:"#eabf00",margin:"auto",position:"relative"}},i.a.createElement("div",{style:{position:"absolute",left:"30%",top:"35%"}},W))),i.a.createElement("div",{className:"item-content mt-4"},i.a.createElement("h3",null,"Add A New Item"))),M)))}}}]);
//# sourceMappingURL=9.03469bcb.chunk.js.map