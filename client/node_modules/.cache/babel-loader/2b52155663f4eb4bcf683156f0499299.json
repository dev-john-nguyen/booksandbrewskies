{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\John\\\\Desktop\\\\Modern React With Redux Projects\\\\beersandbrewskiesproject\\\\booksandbrewskies\\\\client\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _classCallCheck from\"C:\\\\Users\\\\John\\\\Desktop\\\\Modern React With Redux Projects\\\\beersandbrewskiesproject\\\\booksandbrewskies\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\John\\\\Desktop\\\\Modern React With Redux Projects\\\\beersandbrewskiesproject\\\\booksandbrewskies\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\John\\\\Desktop\\\\Modern React With Redux Projects\\\\beersandbrewskiesproject\\\\booksandbrewskies\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\John\\\\Desktop\\\\Modern React With Redux Projects\\\\beersandbrewskiesproject\\\\booksandbrewskies\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\John\\\\Desktop\\\\Modern React With Redux Projects\\\\beersandbrewskiesproject\\\\booksandbrewskies\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import{isEmpty}from'lodash';import axios from'axios';import Modal from'../Modal';import Spinner from'../spinner';import Item from'./components/Item';import{handleStarRating}from'./utils';var BB=/*#__PURE__*/function(_React$Component){_inherits(BB,_React$Component);function BB(props){var _this;_classCallCheck(this,BB);_this=_possibleConstructorReturn(this,_getPrototypeOf(BB).call(this,props));_this.componentDidMount=function _callee(){var reviewItems;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _regeneratorRuntime.awrap(axios.get('/reviews'));case 3:reviewItems=_context.sent;_context.next=10;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);console.log(_context.t0);return _context.abrupt(\"return\",_this.setState({error:true,loading:false}));case 10:_this.setState({reviewItems:reviewItems.data,loading:false});case 11:case\"end\":return _context.stop();}}},null,null,[[0,6]]);};_this.state={reviewItems:[],error:false,loading:true,itemObj:{},filterBB:'all',password:''};return _this;}_createClass(BB,[{key:\"render\",value:function render(){var _this2=this;var starSvg=React.createElement(\"svg\",{className:\"bi bi-star\",width:\"1em\",height:\"1em\",viewBox:\"0 0 16 16\",fill:\"currentColor\",xmlns:\"http://www.w3.org/2000/svg\"},React.createElement(\"path\",{fillRule:\"evenodd\",d:\"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.523-3.356c.329-.314.158-.888-.283-.95l-4.898-.696L8.465.792a.513.513 0 00-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767l-3.686 1.894.694-3.957a.565.565 0 00-.163-.505L1.71 6.745l4.052-.576a.525.525 0 00.393-.288l1.847-3.658 1.846 3.658a.525.525 0 00.393.288l4.052.575-2.906 2.77a.564.564 0 00-.163.506l.694 3.957-3.686-1.894a.503.503 0 00-.461 0z\",clipRule:\"evenodd\"}));var fullStarSvg=React.createElement(\"svg\",{className:\"bi bi-star-fill\",width:\"1em\",height:\"1em\",viewBox:\"0 0 16 16\",fill:\"currentColor\",xmlns:\"http://www.w3.org/2000/svg\"},React.createElement(\"path\",{d:\"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.283.95l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z\"}));var halfStartSvg=React.createElement(\"svg\",{className:\"bi bi-star-half\",width:\"1em\",height:\"1em\",viewBox:\"0 0 16 16\",fill:\"currentColor\",xmlns:\"http://www.w3.org/2000/svg\"},React.createElement(\"path\",{fillRule:\"evenodd\",d:\"M5.354 5.119L7.538.792A.516.516 0 018 .5c.183 0 .366.097.465.292l2.184 4.327 4.898.696A.537.537 0 0116 6.32a.55.55 0 01-.17.445l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256a.519.519 0 01-.146.05c-.341.06-.668-.254-.6-.642l.83-4.73L.173 6.765a.55.55 0 01-.171-.403.59.59 0 01.084-.302.513.513 0 01.37-.245l4.898-.696zM8 12.027c.08 0 .16.018.232.056l3.686 1.894-.694-3.957a.564.564 0 01.163-.505l2.906-2.77-4.052-.576a.525.525 0 01-.393-.288L8.002 2.223 8 2.226v9.8z\",clipRule:\"evenodd\"}));if(this.state.loading)return React.createElement(Spinner,null);if(this.state.error){return React.createElement(Modal,{showValue:true,closeDirect:\"/\",buttonName:\"Close\",title:\"Error\",description:\"Sorry, we are undergoing maintenance. Check back again later.\",svgType:\"error\"});}if(isEmpty(this.state.reviewItems)){return React.createElement(Modal,{showValue:true,closeDirect:\"/\",buttonName:\"Close\",title:\"Empty\",description:\"We currently don't have any items. Check back again later.\",svgType:\"empty\"});}var review=this.state.reviewItems.filter(function(item){if(_this2.state.filterBB==='all'){return true;}else if(item.type===_this2.state.filterBB){return true;}else{return false;}}).map(function(item,index){var starRating=[];for(var i=1;i<6;i++){if(item.myReview.rating>=i){starRating.push(React.createElement(\"p\",{className:\"p-1\",key:item._id+i},fullStarSvg));}else{if(item.myReview.rating<=i-.5&&item.myReview.rating>i-1){starRating.push(React.createElement(\"p\",{className:\"p-1\",key:item._id+i},halfStartSvg));}else{starRating.push(React.createElement(\"p\",{className:\"p-1\",key:item._id+i},starSvg));}}}var custRating=handleStarRating(item.ratings);// //calc customer rating avg\n// let sum = 0;\n// for (let i = 0; i < item.ratings.length; i++) {\n//     sum += parseInt(item.ratings[i], 10);\n// }\n// let avgCustomerRating = sum / item.ratings.length;\n// avgCustomerRating % 1 !== 0 && (avgCustomerRating = avgCustomerRating.toFixed(1))\n// let avgCustStarRating = [];\n// for (let i = 1; i < 6; i++) {\n//     if (avgCustomerRating >= i) {\n//         avgCustStarRating.push(<p className=\"p-1\" key={'avg' + i}>{fullStarSvg}</p>);\n//     } else {\n//         if (avgCustomerRating <= (i - .5) && avgCustomerRating > (i - 1)) {\n//             avgCustStarRating.push(<p className=\"p-1\" key={'avg' + i}>{halfStartSvg}</p>);\n//         } else {\n//             avgCustStarRating.push(<p className=\"p-1\" key={'avg' + i}>{starSvg}</p>);\n//         }\n//     }\n// }\nreturn React.createElement(\"div\",{className:\"bb-item m-3 p-2 d-flex align-items-start flex-column rounded\",style:{width:'250px'},key:index},React.createElement(\"img\",{className:\"img-fluid rounded shadow\",src:item.imageUrl,alt:item.name,width:\"250\",height:\"350\",key:index,style:{height:'350px'}}),React.createElement(\"div\",{className:\"item-content\"},React.createElement(\"h2\",null,item.name),React.createElement(\"p\",null,\"From: \",item.description),React.createElement(\"div\",{className:\"d-flex\"},React.createElement(\"p\",null,\"Our\",React.createElement(\"br\",null),\"Rating:\"),React.createElement(\"div\",{className:\"star d-flex ml-1\"},starRating,React.createElement(\"div\",null,item.myReview.rating))),React.createElement(\"div\",{className:\"cust-avg-rating d-flex\"},React.createElement(\"p\",null,\"Average\",React.createElement(\"br\",null),\"rating:\"),React.createElement(\"div\",{className:\"star ml-1 d-flex\"},custRating.avgCustStarRating,custRating.avgCustomerRating))),React.createElement(\"button\",{className:\"btn btn-primary btn-block mt-auto p-2\",onClick:function onClick(){return _this2.setState({itemObj:{name:item.name,id:item._id,comments:item.comments,image:item.imageUrl,custAvg:custRating.avgCustomerRating,custStar:custRating.avgCustStarRating,myAvg:item.myReview.rating,myComment:item.myReview.comment,myStar:starRating}});}},\"View\"));});//reverse array\nreview.reverse();var _this$state=this.state,itemObj=_this$state.itemObj,filterBB=_this$state.filterBB;return React.createElement(\"div\",{className:\"container\"},React.createElement(\"div\",{className:\"row mb-5\"},React.createElement(\"h1\",{className:\"m-auto position-relative\",style:{top:'20px'}},\"B/B Reviews\")),React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"btn-group btn-group-toggle m-auto w-50\",\"data-toggle\":\"buttons\",style:{minWidth:'300px'}},React.createElement(\"label\",{className:\"btn btn-secondary\"},React.createElement(\"input\",{type:\"radio\",name:\"book\",id:\"book\",autoComplete:\"off\",onClick:function onClick(){return _this2.setState({filterBB:'book'});}}),\"Books\"),React.createElement(\"label\",{className:\"btn btn-secondary active\"},React.createElement(\"input\",{type:\"radio\",name:\"all\",id:\"all\",autoComplete:\"off\",onClick:function onClick(){return _this2.setState({filterBB:'all'});},defaultChecked:true}),\"All\"),React.createElement(\"label\",{className:\"btn btn-secondary\"},React.createElement(\"input\",{type:\"radio\",name:\"beer\",id:\"beer\",autoComplete:\"off\",onClick:function onClick(){return _this2.setState({filterBB:'beer'});}}),\"Beers\"))),React.createElement(\"div\",{className:\"d-flex justify-content-center\",style:{flexWrap:'wrap'}},review),!isEmpty(itemObj)&&React.createElement(Item,{name:itemObj.name,id:itemObj.id,comments:itemObj.comments,image:itemObj.image,custAvg:itemObj.custAvg,custStar:itemObj.custStar,myAvg:itemObj.myAvg,myStar:itemObj.myStar,myComment:itemObj.myComment,handleClose:function handleClose(){return _this2.setState({itemObj:{}});}}));}}]);return BB;}(React.Component);export default BB;","map":{"version":3,"sources":["C:/Users/John/Desktop/Modern React With Redux Projects/beersandbrewskiesproject/booksandbrewskies/client/src/components/BB/index.js"],"names":["React","isEmpty","axios","Modal","Spinner","Item","handleStarRating","BB","props","componentDidMount","get","reviewItems","console","log","setState","error","loading","data","state","itemObj","filterBB","password","starSvg","fullStarSvg","halfStartSvg","review","filter","item","type","map","index","starRating","i","myReview","rating","push","_id","custRating","ratings","width","imageUrl","name","height","description","avgCustStarRating","avgCustomerRating","id","comments","image","custAvg","custStar","myAvg","myComment","comment","myStar","reverse","top","minWidth","flexWrap","Component"],"mappings":"mqCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,KAAwB,QAAxB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,UAAlB,CACA,MAAOC,CAAAA,OAAP,KAAoB,YAApB,CACA,MAAOC,CAAAA,IAAP,KAAiB,mBAAjB,CACA,OAASC,gBAAT,KAAiC,SAAjC,C,GAEMC,CAAAA,E,wEACF,YAAYC,KAAZ,CAAmB,oCACf,oEAAMA,KAAN,GADe,MAanBC,iBAbmB,CAaC,qNAIQP,KAAK,CAACQ,GAAN,CAAU,UAAV,CAJR,SAIZC,WAJY,8FAMZC,OAAO,CAACC,GAAR,cANY,gCAOL,MAAKC,QAAL,CAAc,CAAEC,KAAK,CAAE,IAAT,CAAeC,OAAO,CAAE,KAAxB,CAAd,CAPK,UAUhB,MAAKF,QAAL,CAAc,CAAEH,WAAW,CAAEA,WAAW,CAACM,IAA3B,CAAiCD,OAAO,CAAE,KAA1C,CAAd,EAVgB,iEAbD,CAGf,MAAKE,KAAL,CAAa,CACTP,WAAW,CAAE,EADJ,CAETI,KAAK,CAAE,KAFE,CAGTC,OAAO,CAAE,IAHA,CAITG,OAAO,CAAE,EAJA,CAKTC,QAAQ,CAAE,KALD,CAMTC,QAAQ,CAAE,EAND,CAAb,CAHe,aAWlB,C,sDAgBQ,iBAEL,GAAMC,CAAAA,OAAO,CACT,2BAAK,SAAS,CAAC,YAAf,CAA4B,KAAK,CAAC,KAAlC,CAAwC,MAAM,CAAC,KAA/C,CAAqD,OAAO,CAAC,WAA7D,CAAyE,IAAI,CAAC,cAA9E,CAA6F,KAAK,CAAC,4BAAnG,EACI,4BAAM,QAAQ,CAAC,SAAf,CAAyB,CAAC,CAAC,4eAA3B,CAAwgB,QAAQ,CAAC,SAAjhB,EADJ,CADJ,CAMA,GAAMC,CAAAA,WAAW,CACb,2BAAK,SAAS,CAAC,iBAAf,CAAiC,KAAK,CAAC,KAAvC,CAA6C,MAAM,CAAC,KAApD,CAA0D,OAAO,CAAC,WAAlE,CAA8E,IAAI,CAAC,cAAnF,CAAkG,KAAK,CAAC,4BAAxG,EACI,4BAAM,CAAC,CAAC,4PAAR,EADJ,CADJ,CAMA,GAAMC,CAAAA,YAAY,CACd,2BAAK,SAAS,CAAC,iBAAf,CAAiC,KAAK,CAAC,KAAvC,CAA6C,MAAM,CAAC,KAApD,CAA0D,OAAO,CAAC,WAAlE,CAA8E,IAAI,CAAC,cAAnF,CAAkG,KAAK,CAAC,4BAAxG,EACI,4BAAM,QAAQ,CAAC,SAAf,CAAyB,CAAC,CAAC,yeAA3B,CAAqgB,QAAQ,CAAC,SAA9gB,EADJ,CADJ,CAOA,GAAI,KAAKN,KAAL,CAAWF,OAAf,CAAwB,MAAO,qBAAC,OAAD,MAAP,CAExB,GAAI,KAAKE,KAAL,CAAWH,KAAf,CAAsB,CAClB,MACI,qBAAC,KAAD,EACI,SAAS,CAAE,IADf,CAEI,WAAW,CAAC,GAFhB,CAGI,UAAU,CAAC,OAHf,CAII,KAAK,CAAC,OAJV,CAKI,WAAW,CAAC,+DALhB,CAMI,OAAO,CAAC,OANZ,EADJ,CAUH,CAED,GAAId,OAAO,CAAC,KAAKiB,KAAL,CAAWP,WAAZ,CAAX,CAAqC,CACjC,MACI,qBAAC,KAAD,EACI,SAAS,CAAE,IADf,CAEI,WAAW,CAAC,GAFhB,CAGI,UAAU,CAAC,OAHf,CAII,KAAK,CAAC,OAJV,CAKI,WAAW,CAAC,4DALhB,CAMI,OAAO,CAAC,OANZ,EADJ,CAWH,CAED,GAAMc,CAAAA,MAAM,CAAG,KAAKP,KAAL,CAAWP,WAAX,CAAuBe,MAAvB,CAA8B,SAACC,IAAD,CAAU,CACnD,GAAI,MAAI,CAACT,KAAL,CAAWE,QAAX,GAAwB,KAA5B,CAAmC,CAC/B,MAAO,KAAP,CACH,CAFD,IAEO,IAAIO,IAAI,CAACC,IAAL,GAAc,MAAI,CAACV,KAAL,CAAWE,QAA7B,CAAuC,CAC1C,MAAO,KAAP,CACH,CAFM,IAEA,CACH,MAAO,MAAP,CACH,CACJ,CARc,EAQZS,GARY,CAQR,SAACF,IAAD,CAAOG,KAAP,CAAiB,CACpB,GAAIC,CAAAA,UAAU,CAAG,EAAjB,CAEA,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,CAApB,CAAuBA,CAAC,EAAxB,CAA4B,CACxB,GAAIL,IAAI,CAACM,QAAL,CAAcC,MAAd,EAAwBF,CAA5B,CAA+B,CAC3BD,UAAU,CAACI,IAAX,CAAgB,yBAAG,SAAS,CAAC,KAAb,CAAmB,GAAG,CAAER,IAAI,CAACS,GAAL,CAAWJ,CAAnC,EAAuCT,WAAvC,CAAhB,EACH,CAFD,IAEO,CACH,GAAII,IAAI,CAACM,QAAL,CAAcC,MAAd,EAAyBF,CAAC,CAAG,EAA7B,EAAoCL,IAAI,CAACM,QAAL,CAAcC,MAAd,CAAwBF,CAAC,CAAG,CAApE,CAAwE,CACpED,UAAU,CAACI,IAAX,CAAgB,yBAAG,SAAS,CAAC,KAAb,CAAmB,GAAG,CAAER,IAAI,CAACS,GAAL,CAAWJ,CAAnC,EAAuCR,YAAvC,CAAhB,EACH,CAFD,IAEO,CACHO,UAAU,CAACI,IAAX,CAAgB,yBAAG,SAAS,CAAC,KAAb,CAAmB,GAAG,CAAER,IAAI,CAACS,GAAL,CAAWJ,CAAnC,EAAuCV,OAAvC,CAAhB,EACH,CACJ,CACJ,CAED,GAAMe,CAAAA,UAAU,CAAG/B,gBAAgB,CAACqB,IAAI,CAACW,OAAN,CAAnC,CAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,MACI,4BAAK,SAAS,CAAC,8DAAf,CAA8E,KAAK,CAAE,CAAEC,KAAK,CAAE,OAAT,CAArF,CAAyG,GAAG,CAAET,KAA9G,EACI,2BAAK,SAAS,CAAC,0BAAf,CAA0C,GAAG,CAAEH,IAAI,CAACa,QAApD,CAA8D,GAAG,CAAEb,IAAI,CAACc,IAAxE,CAA8E,KAAK,CAAC,KAApF,CAA0F,MAAM,CAAC,KAAjG,CAAuG,GAAG,CAAEX,KAA5G,CAAmH,KAAK,CAAE,CAAEY,MAAM,CAAE,OAAV,CAA1H,EADJ,CAEI,2BAAK,SAAS,CAAC,cAAf,EACI,8BAAKf,IAAI,CAACc,IAAV,CADJ,CAEI,sCAAUd,IAAI,CAACgB,WAAf,CAFJ,CAGI,2BAAK,SAAS,CAAC,QAAf,EACI,mCAAM,8BAAN,WADJ,CAEI,2BAAK,SAAS,CAAC,kBAAf,EACKZ,UADL,CAEI,+BAAMJ,IAAI,CAACM,QAAL,CAAcC,MAApB,CAFJ,CAFJ,CAHJ,CAUI,2BAAK,SAAS,CAAC,wBAAf,EACI,uCAAU,8BAAV,WADJ,CAEI,2BAAK,SAAS,CAAC,kBAAf,EAAmCG,UAAU,CAACO,iBAA9C,CAAiEP,UAAU,CAACQ,iBAA5E,CAFJ,CAVJ,CAFJ,CAgBI,8BACI,SAAS,CAAC,uCADd,CAEI,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAC/B,QAAL,CACX,CACIK,OAAO,CACP,CACIsB,IAAI,CAAEd,IAAI,CAACc,IADf,CAEIK,EAAE,CAAEnB,IAAI,CAACS,GAFb,CAGIW,QAAQ,CAAEpB,IAAI,CAACoB,QAHnB,CAIIC,KAAK,CAAErB,IAAI,CAACa,QAJhB,CAKIS,OAAO,CAAEZ,UAAU,CAACQ,iBALxB,CAMIK,QAAQ,CAAEb,UAAU,CAACO,iBANzB,CAOIO,KAAK,CAAExB,IAAI,CAACM,QAAL,CAAcC,MAPzB,CAQIkB,SAAS,CAAEzB,IAAI,CAACM,QAAL,CAAcoB,OAR7B,CASIC,MAAM,CAAEvB,UATZ,CAFJ,CADW,CAAN,EAFb,SAhBJ,CADJ,CAsCH,CAvFc,CAAf,CAyFA;AACAN,MAAM,CAAC8B,OAAP,GA5IK,gBA8IyB,KAAKrC,KA9I9B,CA8IGC,OA9IH,aA8IGA,OA9IH,CA8IYC,QA9IZ,aA8IYA,QA9IZ,CAgJL,MACI,4BAAK,SAAS,CAAC,WAAf,EACI,2BAAK,SAAS,CAAC,UAAf,EACI,0BAAI,SAAS,CAAC,0BAAd,CAAyC,KAAK,CAAE,CAACoC,GAAG,CAAE,MAAN,CAAhD,gBADJ,CADJ,CAII,2BAAK,SAAS,CAAC,KAAf,EACI,2BAAK,SAAS,CAAC,wCAAf,CAAwD,cAAY,SAApE,CAA8E,KAAK,CAAE,CAACC,QAAQ,CAAE,OAAX,CAArF,EACI,6BAAO,SAAS,CAAC,mBAAjB,EACI,6BAAO,IAAI,CAAC,OAAZ,CAAoB,IAAI,CAAC,MAAzB,CAAgC,EAAE,CAAC,MAAnC,CAA0C,YAAY,CAAC,KAAvD,CAA6D,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAC3C,QAAL,CAAc,CAACM,QAAQ,CAAE,MAAX,CAAd,CAAN,EAAtE,EADJ,SADJ,CAKI,6BAAO,SAAS,CAAC,0BAAjB,EACI,6BAAO,IAAI,CAAC,OAAZ,CAAoB,IAAI,CAAC,KAAzB,CAA+B,EAAE,CAAC,KAAlC,CAAwC,YAAY,CAAC,KAArD,CAA2D,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACN,QAAL,CAAc,CAACM,QAAQ,CAAE,KAAX,CAAd,CAAN,EAApE,CAA4G,cAAc,KAA1H,EADJ,OALJ,CASI,6BAAO,SAAS,CAAC,mBAAjB,EACI,6BAAO,IAAI,CAAC,OAAZ,CAAoB,IAAI,CAAC,MAAzB,CAAgC,EAAE,CAAC,MAAnC,CAA0C,YAAY,CAAC,KAAvD,CAA6D,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACN,QAAL,CAAc,CAACM,QAAQ,CAAE,MAAX,CAAd,CAAN,EAAtE,EADJ,SATJ,CADJ,CAJJ,CAoBI,2BAAK,SAAS,CAAC,+BAAf,CAA+C,KAAK,CAAE,CAAEsC,QAAQ,CAAE,MAAZ,CAAtD,EACKjC,MADL,CApBJ,CAuBK,CAACxB,OAAO,CAACkB,OAAD,CAAR,EAAqB,oBAAC,IAAD,EAClB,IAAI,CAAEA,OAAO,CAACsB,IADI,CAElB,EAAE,CAAEtB,OAAO,CAAC2B,EAFM,CAGlB,QAAQ,CAAE3B,OAAO,CAAC4B,QAHA,CAIlB,KAAK,CAAE5B,OAAO,CAAC6B,KAJG,CAKlB,OAAO,CAAE7B,OAAO,CAAC8B,OALC,CAMlB,QAAQ,CAAE9B,OAAO,CAAC+B,QANA,CAOlB,KAAK,CAAE/B,OAAO,CAACgC,KAPG,CAQlB,MAAM,CAAEhC,OAAO,CAACmC,MARE,CASlB,SAAS,CAAEnC,OAAO,CAACiC,SATD,CAUlB,WAAW,CAAE,6BAAM,CAAA,MAAI,CAACtC,QAAL,CAAc,CAAEK,OAAO,CAAE,EAAX,CAAd,CAAN,EAVK,EAvB1B,CADJ,CAuCH,C,gBAnNYnB,KAAK,CAAC2D,S,EAsNvB,cAAepD,CAAAA,EAAf","sourcesContent":["import React from 'react';\r\nimport { isEmpty } from 'lodash';\r\nimport axios from 'axios';\r\nimport Modal from '../Modal';\r\nimport Spinner from '../spinner';\r\nimport Item from './components/Item';\r\nimport { handleStarRating } from './utils';\r\n\r\nclass BB extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            reviewItems: [],\r\n            error: false,\r\n            loading: true,\r\n            itemObj: {},\r\n            filterBB: 'all',\r\n            password: ''\r\n        }\r\n    }\r\n\r\n    componentDidMount = async () => {\r\n        let reviewItems;\r\n\r\n        try {\r\n            reviewItems = await axios.get('/reviews');\r\n        } catch (e) {\r\n            console.log(e)\r\n            return this.setState({ error: true, loading: false })\r\n        }\r\n\r\n        this.setState({ reviewItems: reviewItems.data, loading: false });\r\n\r\n    }\r\n\r\n    render() {\r\n\r\n        const starSvg = (\r\n            <svg className=\"bi bi-star\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path fillRule=\"evenodd\" d=\"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.523-3.356c.329-.314.158-.888-.283-.95l-4.898-.696L8.465.792a.513.513 0 00-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767l-3.686 1.894.694-3.957a.565.565 0 00-.163-.505L1.71 6.745l4.052-.576a.525.525 0 00.393-.288l1.847-3.658 1.846 3.658a.525.525 0 00.393.288l4.052.575-2.906 2.77a.564.564 0 00-.163.506l.694 3.957-3.686-1.894a.503.503 0 00-.461 0z\" clipRule=\"evenodd\" />\r\n            </svg>\r\n        )\r\n\r\n        const fullStarSvg = (\r\n            <svg className=\"bi bi-star-fill\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path d=\"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.283.95l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z\" />\r\n            </svg>\r\n        )\r\n\r\n        const halfStartSvg = (\r\n            <svg className=\"bi bi-star-half\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path fillRule=\"evenodd\" d=\"M5.354 5.119L7.538.792A.516.516 0 018 .5c.183 0 .366.097.465.292l2.184 4.327 4.898.696A.537.537 0 0116 6.32a.55.55 0 01-.17.445l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256a.519.519 0 01-.146.05c-.341.06-.668-.254-.6-.642l.83-4.73L.173 6.765a.55.55 0 01-.171-.403.59.59 0 01.084-.302.513.513 0 01.37-.245l4.898-.696zM8 12.027c.08 0 .16.018.232.056l3.686 1.894-.694-3.957a.564.564 0 01.163-.505l2.906-2.77-4.052-.576a.525.525 0 01-.393-.288L8.002 2.223 8 2.226v9.8z\" clipRule=\"evenodd\" />\r\n            </svg>\r\n        )\r\n\r\n\r\n        if (this.state.loading) return <Spinner />;\r\n\r\n        if (this.state.error) {\r\n            return (\r\n                <Modal\r\n                    showValue={true}\r\n                    closeDirect='/'\r\n                    buttonName='Close'\r\n                    title='Error'\r\n                    description='Sorry, we are undergoing maintenance. Check back again later.'\r\n                    svgType=\"error\"\r\n                />\r\n            )\r\n        }\r\n\r\n        if (isEmpty(this.state.reviewItems)) {\r\n            return (\r\n                <Modal\r\n                    showValue={true}\r\n                    closeDirect='/'\r\n                    buttonName='Close'\r\n                    title='Empty'\r\n                    description=\"We currently don't have any items. Check back again later.\"\r\n                    svgType=\"empty\"\r\n                />\r\n            )\r\n\r\n        }\r\n\r\n        const review = this.state.reviewItems.filter((item) => {\r\n            if (this.state.filterBB === 'all') {\r\n                return true;\r\n            } else if (item.type === this.state.filterBB) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        }).map((item, index) => {\r\n            let starRating = [];\r\n\r\n            for (let i = 1; i < 6; i++) {\r\n                if (item.myReview.rating >= i) {\r\n                    starRating.push(<p className=\"p-1\" key={item._id + i}>{fullStarSvg}</p>);\r\n                } else {\r\n                    if (item.myReview.rating <= (i - .5) && item.myReview.rating > (i - 1)) {\r\n                        starRating.push(<p className=\"p-1\" key={item._id + i}>{halfStartSvg}</p>);\r\n                    } else {\r\n                        starRating.push(<p className=\"p-1\" key={item._id + i}>{starSvg}</p>);\r\n                    }\r\n                }\r\n            }\r\n\r\n            const custRating = handleStarRating(item.ratings);\r\n\r\n            // //calc customer rating avg\r\n            // let sum = 0;\r\n            // for (let i = 0; i < item.ratings.length; i++) {\r\n            //     sum += parseInt(item.ratings[i], 10);\r\n            // }\r\n\r\n            // let avgCustomerRating = sum / item.ratings.length;\r\n\r\n            // avgCustomerRating % 1 !== 0 && (avgCustomerRating = avgCustomerRating.toFixed(1))\r\n\r\n            // let avgCustStarRating = [];\r\n\r\n            // for (let i = 1; i < 6; i++) {\r\n            //     if (avgCustomerRating >= i) {\r\n            //         avgCustStarRating.push(<p className=\"p-1\" key={'avg' + i}>{fullStarSvg}</p>);\r\n            //     } else {\r\n            //         if (avgCustomerRating <= (i - .5) && avgCustomerRating > (i - 1)) {\r\n            //             avgCustStarRating.push(<p className=\"p-1\" key={'avg' + i}>{halfStartSvg}</p>);\r\n            //         } else {\r\n            //             avgCustStarRating.push(<p className=\"p-1\" key={'avg' + i}>{starSvg}</p>);\r\n            //         }\r\n            //     }\r\n            // }\r\n\r\n            return (\r\n                <div className=\"bb-item m-3 p-2 d-flex align-items-start flex-column rounded\" style={{ width: '250px' }} key={index}>\r\n                    <img className=\"img-fluid rounded shadow\" src={item.imageUrl} alt={item.name} width='250' height='350' key={index} style={{ height: '350px' }} />\r\n                    <div className=\"item-content\">\r\n                        <h2>{item.name}</h2>\r\n                        <p>From: {item.description}</p>\r\n                        <div className=\"d-flex\">\r\n                            <p>Our<br />Rating:</p>\r\n                            <div className=\"star d-flex ml-1\">\r\n                                {starRating}\r\n                                <div>{item.myReview.rating}</div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"cust-avg-rating d-flex\">\r\n                            <p>Average<br />rating:</p>\r\n                            <div className=\"star ml-1 d-flex\">{custRating.avgCustStarRating}{custRating.avgCustomerRating}</div></div>\r\n                    </div>\r\n                    <button\r\n                        className=\"btn btn-primary btn-block mt-auto p-2\"\r\n                        onClick={() => this.setState(\r\n                            {\r\n                                itemObj:\r\n                                {\r\n                                    name: item.name,\r\n                                    id: item._id,\r\n                                    comments: item.comments,\r\n                                    image: item.imageUrl,\r\n                                    custAvg: custRating.avgCustomerRating,\r\n                                    custStar: custRating.avgCustStarRating,\r\n                                    myAvg: item.myReview.rating,\r\n                                    myComment: item.myReview.comment,\r\n                                    myStar: starRating\r\n                                }\r\n                            })}>\r\n                        View\r\n                    </button>\r\n                </div>\r\n            )\r\n        })\r\n\r\n        //reverse array\r\n        review.reverse();\r\n\r\n        const { itemObj, filterBB } = this.state;\r\n\r\n        return (\r\n            <div className=\"container\">\r\n                <div className=\"row mb-5\">\r\n                    <h1 className=\"m-auto position-relative\" style={{top: '20px'}}>B/B Reviews</h1>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <div className=\"btn-group btn-group-toggle m-auto w-50\" data-toggle=\"buttons\" style={{minWidth: '300px'}}>\r\n                        <label className=\"btn btn-secondary\">\r\n                            <input type=\"radio\" name=\"book\" id=\"book\" autoComplete=\"off\" onClick={() => this.setState({filterBB: 'book'})} />\r\n                            Books\r\n                        </label>\r\n                        <label className=\"btn btn-secondary active\">\r\n                            <input type=\"radio\" name=\"all\" id=\"all\" autoComplete=\"off\" onClick={() => this.setState({filterBB: 'all'})} defaultChecked/>\r\n                            All\r\n                         </label>\r\n                        <label className=\"btn btn-secondary\">\r\n                            <input type=\"radio\" name=\"beer\" id=\"beer\" autoComplete=\"off\" onClick={() => this.setState({filterBB: 'beer'})}/>\r\n                            Beers\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                <div className=\"d-flex justify-content-center\" style={{ flexWrap: 'wrap' }}>\r\n                    {review}\r\n                </div>\r\n                {!isEmpty(itemObj) && <Item\r\n                    name={itemObj.name}\r\n                    id={itemObj.id}\r\n                    comments={itemObj.comments}\r\n                    image={itemObj.image}\r\n                    custAvg={itemObj.custAvg}\r\n                    custStar={itemObj.custStar}\r\n                    myAvg={itemObj.myAvg}\r\n                    myStar={itemObj.myStar}\r\n                    myComment={itemObj.myComment}\r\n                    handleClose={() => this.setState({ itemObj: {} })\r\n                    }\r\n                />}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default BB;"]},"metadata":{},"sourceType":"module"}