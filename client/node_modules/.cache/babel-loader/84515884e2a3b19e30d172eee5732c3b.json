{"ast":null,"code":"import axios from'axios';export var getStripe=function getStripe(cartTotal,cartProducts){var products=cartProducts.map(function(p){return{id:p.id,sku:p.sku,title:p.title,description:p.description,price:p.price,quantity:p.quantity};});var order={amount:Math.floor(cartTotal.totalPrice*100),currency:cartTotal.currencyId,description:JSON.stringify(products)};var response;try{response=axios.get('/shop/checkout',{params:{order:order}});}catch(error){if(error.response){// Request made and server responded\nconsole.log(error.response.data);console.log(error.response.status);console.log(error.response.headers);}else if(error.request){// The request was made but no response was received\nconsole.log(error.request);}else{// Something happened in setting up the request that triggered an Error\nconsole.log('Error',error.message);}return{error:true};}return response;};export var storeOrder=function storeOrder(paymentIntent,cartProducts,cartTotal,name,phone,email){var products=cartProducts.map(function(p){return{id:p.id,sku:p.sku,title:p.title,description:p.description,price:p.price,quantity:p.quantity};});var order={chargeId:paymentIntent.id,name:name,phone:phone,email:email,amount:cartTotal.totalPrice,chargeAmount:paymentIntent.amount,currency:cartTotal.currencyId,products:products,chargeDescription:JSON.parse(paymentIntent.description),shippingAddress:paymentIntent.shipping,paymentStatus:paymentIntent.status,confirmedPayment:'processing',orderStatus:'ordered'};var response;try{response=axios.post('/paid',order);}catch(error){if(error.response){// Request made and server responded\nconsole.log(error.response.data);console.log(error.response.status);console.log(error.response.headers);}else if(error.request){// The request was made but no response was received\nconsole.log(error.request);}else{// Something happened in setting up the request that triggered an Error\nconsole.log('Error',error.message);}return{error:true};}return response;};","map":{"version":3,"sources":["C:/Users/John/Desktop/Modern React With Redux Projects/beersandbrewskiesproject/booksandbrewskies/client/src/services/order/actions.js"],"names":["axios","getStripe","cartTotal","cartProducts","products","map","p","id","sku","title","description","price","quantity","order","amount","Math","floor","totalPrice","currency","currencyId","JSON","stringify","response","get","params","error","console","log","data","status","headers","request","message","storeOrder","paymentIntent","name","phone","email","chargeId","chargeAmount","chargeDescription","parse","shippingAddress","shipping","paymentStatus","confirmedPayment","orderStatus","post"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\n\r\nexport const getStripe = (cartTotal, cartProducts) => {\r\n\r\n  const products = cartProducts.map(p => {\r\n    return ({id: p.id,\r\n    sku: p.sku,\r\n    title: p.title,\r\n    description: p.description,\r\n    price: p.price,\r\n    quantity: p.quantity})\r\n  });\r\n\r\n  const order = {\r\n    amount: Math.floor(cartTotal.totalPrice * 100),\r\n    currency: cartTotal.currencyId,\r\n    description: JSON.stringify(products)\r\n  }\r\n\r\n  let response;\r\n\r\n  try {\r\n         response = axios.get('/shop/checkout',\r\n         {\r\n          params: {order}\r\n      });\r\n } catch (error) {\r\n    if (error.response) {\r\n      // Request made and server responded\r\n      console.log(error.response.data);\r\n      console.log(error.response.status);\r\n      console.log(error.response.headers);\r\n    } else if (error.request) {\r\n      // The request was made but no response was received\r\n      console.log(error.request);\r\n    } else {\r\n      // Something happened in setting up the request that triggered an Error\r\n      console.log('Error', error.message);\r\n    }\r\n    return {error: true};\r\n  }\r\n  return response;\r\n}\r\n\r\nexport const storeOrder = (paymentIntent, cartProducts, cartTotal, name, phone, email) => {\r\n\r\n  const products = cartProducts.map(p => {\r\n    return ({id: p.id,\r\n    sku: p.sku,\r\n    title: p.title,\r\n    description: p.description,\r\n    price: p.price,\r\n    quantity: p.quantity})\r\n  });\r\n\r\n  const order = {\r\n    chargeId : paymentIntent.id,\r\n    name: name,\r\n    phone: phone,\r\n    email: email,\r\n    amount: cartTotal.totalPrice,\r\n    chargeAmount: paymentIntent.amount,\r\n    currency: cartTotal.currencyId,\r\n    products: products,\r\n    chargeDescription: JSON.parse(paymentIntent.description),\r\n    shippingAddress: paymentIntent.shipping,\r\n    paymentStatus: paymentIntent.status,\r\n    confirmedPayment: 'processing',\r\n    orderStatus: 'ordered'\r\n  };\r\n\r\n  let response\r\n\r\n  try {\r\n    response = axios.post('/paid', order);\r\n  } catch(error) {\r\n     if (error.response) {\r\n       // Request made and server responded\r\n       console.log(error.response.data);\r\n       console.log(error.response.status);\r\n       console.log(error.response.headers);\r\n     } else if (error.request) {\r\n       // The request was made but no response was received\r\n       console.log(error.request);\r\n     } else {\r\n       // Something happened in setting up the request that triggered an Error\r\n       console.log('Error', error.message);\r\n     }\r\n     return {error: true};\r\n   }\r\n\r\n   return response;\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}