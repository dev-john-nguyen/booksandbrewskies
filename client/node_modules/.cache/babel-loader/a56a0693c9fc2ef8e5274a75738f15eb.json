{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\John\\\\Desktop\\\\Modern React With Redux Projects\\\\beersandbrewskies\\\\beersandbrewskies\\\\src\\\\components\\\\shop\\\\components\\\\FloatCart.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport CartProduct from './CartProduct';\nimport { updateCartTotal, loadCart, removeProduct, changeProductQuantity } from '../../../actions';\nimport formatPrice from './formatPrice';\nimport './style.scss';\n\nclass FloatCart extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      newProduct: this.props.newProduct,\n      productToChange: this.props.productToChange,\n      productToRemove: this.props.productToRemove,\n      isOpen: false\n    };\n\n    this.openFloatCart = () => {\n      this.setState({\n        isOpen: true\n      });\n    };\n\n    this.closeFloatCart = () => {\n      this.setState({\n        isOpen: false\n      });\n    };\n\n    this.addProduct = product => {\n      const _this$props = this.props,\n            cartProducts = _this$props.cartProducts,\n            updateCartTotal = _this$props.updateCartTotal;\n      let productAlreadyInCart = false;\n      cartProducts.forEach(cp => {\n        if (cp.id === product.id) {\n          cp.quantity += product.quantity;\n          productAlreadyInCart = true;\n        }\n      });\n\n      if (!productAlreadyInCart) {\n        cartProducts.push(product);\n      }\n\n      updateCartTotal(cartProducts);\n      this.openFloatCart();\n    };\n\n    this.removeProduct = product => {\n      const _this$props2 = this.props,\n            cartProducts = _this$props2.cartProducts,\n            updateCartTotal = _this$props2.updateCartTotal;\n      const index = cartProducts.findIndex(p => p.id === product.id);\n\n      if (index >= 0) {\n        cartProducts.splice(index, 1);\n        updateCartTotal(cartProducts);\n      }\n    };\n\n    this.changeProductQuantity = changedProduct => {\n      const _this$props3 = this.props,\n            cartProducts = _this$props3.cartProducts,\n            updateCartTotal = _this$props3.updateCartTotal;\n      const product = cartProducts.find(p => p.id === changedProduct.id);\n      product.quantity = changedProduct.quantity;\n\n      if (product.quantity <= 0) {\n        this.removeProduct(product);\n      }\n\n      updateCartTotal(cartProducts);\n    };\n\n    this.proceedToCheckout = () => {\n      const _this$props$cartTotal = this.props.cartTotal,\n            totalPrice = _this$props$cartTotal.totalPrice,\n            productQuantity = _this$props$cartTotal.productQuantity,\n            currencyFormat = _this$props$cartTotal.currencyFormat,\n            currencyId = _this$props$cartTotal.currencyId;\n\n      if (!productQuantity) {\n        alert('Add some product in the cart!');\n      } else {}\n    };\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    if (nextProps.newProduct !== prevState.newProduct) {\n      return {\n        newProduct: nextProps.newProduct\n      };\n    }\n\n    if (nextProps.productToRemove !== prevState.productToRemove) {\n      return {\n        productToRemove: nextProps.productToRemove\n      };\n    }\n\n    if (nextProps.productToChange !== prevState.productToChange) {\n      return {\n        productToChange: nextProps.productToChange\n      };\n    }\n\n    return null;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.newProduct !== this.state.newProduct) {\n      this.addProduct(this.state.newProduct);\n    }\n\n    if (prevState.productToRemove !== this.state.productToRemove) {\n      this.removeProduct(this.state.productToRemove);\n    }\n\n    if (prevState.productToChange !== this.state.productToChange) {\n      this.changeProductQuantity(this.state.productToChange);\n    }\n  }\n\n  render() {\n    const _this$props4 = this.props,\n          cartTotal = _this$props4.cartTotal,\n          cartProducts = _this$props4.cartProducts,\n          removeProduct = _this$props4.removeProduct,\n          changeProductQuantity = _this$props4.changeProductQuantity;\n    const products = cartProducts.map(p => {\n      return React.createElement(CartProduct, {\n        product: p,\n        removeProduct: removeProduct,\n        changeProductQuantity: changeProductQuantity,\n        key: p.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      });\n    });\n    let classes = ['float-cart'];\n\n    if (!!this.state.isOpen) {\n      classes.push('float-cart--open');\n    }\n\n    return React.createElement(\"div\", {\n      className: classes.join(' '),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, this.state.isOpen && React.createElement(\"div\", {\n      onClick: () => this.closeFloatCart(),\n      className: \"float-cart__close-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, \"X\"), !this.state.isOpen && React.createElement(\"span\", {\n      onClick: () => this.openFloatCart(),\n      className: \"bag bag--float-cart-closed\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"bag__quantity\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, cartTotal.productQuantity)), React.createElement(\"div\", {\n      className: \"float-cart__content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"float-cart__header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"bag\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"bag__quantity\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, cartTotal.productQuantity)), React.createElement(\"span\", {\n      className: \"header-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"float-cart__shelf-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, products, !products.length && React.createElement(\"p\", {\n      className: \"shelf-empty\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, \"Add some products in the cart \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }), \":)\")), React.createElement(\"div\", {\n      className: \"float-cart__footer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"sub\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, \"SUBTOTAL\"), React.createElement(\"div\", {\n      className: \"sub-price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"sub-price__val\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, `${cartTotal.currencyFormat} ${this.formatPrice(cartTotal.totalPrice, cartTotal.currencyId)}`)), React.createElement(\"div\", {\n      onClick: () => this.proceedToCheckout(),\n      className: \"buy-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"Checkout\"))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  cartProducts: state.cart.products,\n  newProduct: state.cart.productToAdd,\n  productToRemove: state.cart.productToRemove,\n  productToChange: state.cart.productToChange,\n  cartTotal: state.cartTotal.Total\n});\n\nexport default connect(mapStateToProps, {\n  updateCartTotal,\n  loadCart,\n  removeProduct,\n  changeProductQuantity\n})(FloatCart);","map":{"version":3,"sources":["C:/Users/John/Desktop/Modern React With Redux Projects/beersandbrewskies/beersandbrewskies/src/components/shop/components/FloatCart.js"],"names":["React","connect","CartProduct","updateCartTotal","loadCart","removeProduct","changeProductQuantity","formatPrice","FloatCart","Component","state","newProduct","props","productToChange","productToRemove","isOpen","openFloatCart","setState","closeFloatCart","addProduct","product","cartProducts","productAlreadyInCart","forEach","cp","id","quantity","push","index","findIndex","p","splice","changedProduct","find","proceedToCheckout","cartTotal","totalPrice","productQuantity","currencyFormat","currencyId","alert","getDerivedStateFromProps","nextProps","prevState","componentDidUpdate","prevProps","render","products","map","classes","join","length","mapStateToProps","cart","productToAdd","Total"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport CartProduct from './CartProduct';\r\nimport { updateCartTotal, loadCart, removeProduct, changeProductQuantity } from '../../../actions';\r\nimport formatPrice from './formatPrice';\r\nimport './style.scss';\r\n\r\nclass FloatCart extends React.Component {\r\n  state = {\r\n    newProduct: this.props.newProduct,\r\n    productToChange: this.props.productToChange,\r\n    productToRemove: this.props.productToRemove,\r\n    isOpen: false\r\n  };\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n\r\n    if (nextProps.newProduct !== prevState.newProduct) {\r\n      return { newProduct : nextProps.newProduct }\r\n    }\r\n\r\n    if(nextProps.productToRemove !== prevState.productToRemove){\r\n      return { productToRemove: nextProps.productToRemove };\r\n    }\r\n\r\n    if (nextProps.productToChange !== prevState.productToChange) {\r\n      return { productToChange: nextProps.productToChange };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState){\r\n    if(prevState.newProduct !== this.state.newProduct){\r\n  this.addProduct(this.state.newProduct);\r\n}\r\n\r\nif (prevState.productToRemove !== this.state.productToRemove) {\r\n  this.removeProduct(this.state.productToRemove);\r\n}\r\n\r\nif (prevState.productToChange !== this.state.productToChange) {\r\n  this.changeProductQuantity(this.state.productToChange);\r\n}\r\n\r\n  }\r\n\r\n  openFloatCart = () => {\r\n    this.setState({ isOpen: true });\r\n  };\r\n\r\n  closeFloatCart = () => {\r\n    this.setState({ isOpen: false });\r\n  };\r\n\r\n  addProduct = product => {\r\n    const { cartProducts, updateCartTotal } = this.props;\r\n    let productAlreadyInCart = false;\r\n\r\n    cartProducts.forEach(cp => {\r\n      if (cp.id === product.id) {\r\n        cp.quantity += product.quantity;\r\n        productAlreadyInCart = true;\r\n      }\r\n    });\r\n\r\n    if (!productAlreadyInCart) {\r\n      cartProducts.push(product);\r\n    }\r\n\r\n    updateCartTotal(cartProducts);\r\n    this.openFloatCart();\r\n  };\r\n\r\n  removeProduct = product => {\r\n    const { cartProducts, updateCartTotal } = this.props;\r\n\r\n    const index = cartProducts.findIndex(p => p.id === product.id);\r\n    if (index >= 0) {\r\n      cartProducts.splice(index, 1);\r\n      updateCartTotal(cartProducts);\r\n    }\r\n  };\r\n\r\n\r\n  changeProductQuantity = changedProduct => {\r\n    const { cartProducts, updateCartTotal } = this.props;\r\n\r\n    const product = cartProducts.find(p => p.id === changedProduct.id);\r\n    product.quantity = changedProduct.quantity;\r\n    if (product.quantity <= 0) {\r\n      this.removeProduct(product);\r\n    }\r\n    updateCartTotal(cartProducts);\r\n  }\r\n\r\n  proceedToCheckout = () => {\r\n    const {\r\n      totalPrice,\r\n      productQuantity,\r\n      currencyFormat,\r\n      currencyId\r\n    } = this.props.cartTotal;\r\n\r\n    if (!productQuantity) {\r\n      alert('Add some product in the cart!');\r\n    } else {\r\n    }\r\n  };\r\n\r\n\r\n  render() {\r\n    const { cartTotal, cartProducts, removeProduct, changeProductQuantity } = this.props;\r\n\r\n    const products = cartProducts.map(p => {\r\n      return (\r\n        <CartProduct\r\n          product={p}\r\n          removeProduct={removeProduct}\r\n          changeProductQuantity={changeProductQuantity}\r\n          key={p.id}\r\n          />\r\n      );\r\n    });\r\n\r\n    let classes = ['float-cart'];\r\n\r\n    if (!!this.state.isOpen) {\r\n      classes.push('float-cart--open');\r\n    }\r\n\r\n    return (\r\n      <div className={classes.join(' ')}>\r\n        {/* If cart open, show close (x) button */}\r\n        {this.state.isOpen && (\r\n          <div\r\n            onClick={() => this.closeFloatCart()}\r\n            className=\"float-cart__close-btn\"\r\n          >\r\n            X\r\n          </div>\r\n        )}\r\n\r\n        {/* If cart is closed, show bag with quantity of product and open cart action */}\r\n        {!this.state.isOpen && (\r\n          <span\r\n            onClick={() => this.openFloatCart()}\r\n            className=\"bag bag--float-cart-closed\"\r\n          >\r\n            <span className=\"bag__quantity\">{cartTotal.productQuantity}</span>\r\n          </span>\r\n        )}\r\n\r\n        <div className=\"float-cart__content\">\r\n          <div className=\"float-cart__header\">\r\n            <span className=\"bag\">\r\n              <span className=\"bag__quantity\">{cartTotal.productQuantity}</span>\r\n            </span>\r\n            <span className=\"header-title\"></span>\r\n          </div>\r\n\r\n          <div className=\"float-cart__shelf-container\">\r\n            {products}\r\n            {!products.length && (\r\n              <p className=\"shelf-empty\">\r\n                Add some products in the cart <br />\r\n                :)\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"float-cart__footer\">\r\n            <div className=\"sub\">SUBTOTAL</div>\r\n            <div className=\"sub-price\">\r\n              <p className=\"sub-price__val\">\r\n                {`${cartTotal.currencyFormat} ${this.formatPrice(\r\n                  cartTotal.totalPrice,\r\n                  cartTotal.currencyId\r\n                )}`}\r\n              </p>\r\n            </div>\r\n            <div onClick={() => this.proceedToCheckout()} className=\"buy-btn\">\r\n              Checkout\r\n            </div>\r\n          </div>\r\n\r\n\r\n\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  cartProducts: state.cart.products,\r\n  newProduct: state.cart.productToAdd,\r\n  productToRemove: state.cart.productToRemove,\r\n  productToChange: state.cart.productToChange,\r\n  cartTotal: state.cartTotal.Total\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  {updateCartTotal, loadCart, removeProduct, changeProductQuantity}\r\n)(FloatCart);\r\n"]},"metadata":{},"sourceType":"module"}