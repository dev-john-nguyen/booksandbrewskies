{"ast":null,"code":"import axios from 'axios';\nimport Stripe from 'stripe';\nexport const stripe = (cartTotal, cartProducts) => async dispatch => {\n  const image = `${window.location.hostname}:3000/static/media/home-background-img.40b4543e.jpg`;\n  var description = \"\";\n  cartProducts.forEach((item, i) => {\n    if (i < cartProducts.length - 1) {\n      description += `${item.title} (${item.quantity}), `;\n    } else {\n      description += `and ${item.title} (${item.quantity}).`;\n    }\n  });\n  var name = `You are purchasing a total of ${cartTotal.quantity} items.`; //convert totalPrice into whole number\n\n  const totalPrice = cartTotal.totalPrice * 100;\n  const formValues = {\n    name: name,\n    description: description,\n    currency: cartTotal.currencyId,\n    totalPrice: totalPrice\n  };\n  let response; // const response = await contacts.post('/contacts/add', formValues);\n\n  try {\n    response = await axios.post('/shop/checkout', formValues);\n  } catch (e) {\n    return console.log(e);\n  }\n\n  console.log(response.data.sessionId);\n  const stripe = window.Stripe('pk_test_0kzCXvF6peItv0Z0FZ6QFG0j');\n  console.log(stripe);\n  stripe.redirectToCheckout({\n    sessionId: response.data.sessionId\n  }).then(function (result) {// If `redirectToCheckout` fails due to a browser or network\n    // error, display the localized error message to your customer\n    // using `result.error.message`.\n  }); // history.push('/contact?success');\n};","map":{"version":3,"sources":["C:/Users/John/Desktop/Modern React With Redux Projects/beersandbrewskies/beersandbrewskies/src/services/stripe/actions.js"],"names":["axios","Stripe","stripe","cartTotal","cartProducts","dispatch","image","window","location","hostname","description","forEach","item","i","length","title","quantity","name","totalPrice","formValues","currency","currencyId","response","post","e","console","log","data","sessionId","redirectToCheckout","then","result"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AAEA,OAAO,MAAMC,MAAM,GAAG,CAACC,SAAD,EAAYC,YAAZ,KAA6B,MAAOC,QAAP,IAAoB;AACrE,QAAMC,KAAK,GAAI,GAAEC,MAAM,CAACC,QAAP,CAAgBC,QAAS,qDAA1C;AAEA,MAAIC,WAAW,GAAG,EAAlB;AAEAN,EAAAA,YAAY,CAACO,OAAb,CAAqB,CAACC,IAAD,EAAOC,CAAP,KAAa;AAChC,QAAGA,CAAC,GAAIT,YAAY,CAACU,MAAb,GAAsB,CAA9B,EAAiC;AAC/BJ,MAAAA,WAAW,IAAI,GAAEE,IAAI,CAACG,KAAM,KAAIH,IAAI,CAACI,QAAS,KAA9C;AACD,KAFD,MAEK;AACHN,MAAAA,WAAW,IAAK,OAAME,IAAI,CAACG,KAAM,KAAIH,IAAI,CAACI,QAAS,IAAnD;AACD;AACF,GAND;AAQA,MAAIC,IAAI,GAAI,iCAAgCd,SAAS,CAACa,QAAS,SAA/D,CAbqE,CAerE;;AACA,QAAME,UAAU,GAAGf,SAAS,CAACe,UAAV,GAAuB,GAA1C;AAEA,QAAMC,UAAU,GAAG;AACjBF,IAAAA,IAAI,EAAEA,IADW;AAEjBP,IAAAA,WAAW,EAAEA,WAFI;AAGjBU,IAAAA,QAAQ,EAAEjB,SAAS,CAACkB,UAHH;AAIjBH,IAAAA,UAAU,EAAEA;AAJK,GAAnB;AAOA,MAAII,QAAJ,CAzBqE,CA0BrE;;AACA,MAAI;AACHA,IAAAA,QAAQ,GAAG,MAAMtB,KAAK,CAACuB,IAAN,CAAW,gBAAX,EAA6BJ,UAA7B,CAAjB;AACA,GAFD,CAEE,OAAOK,CAAP,EAAU;AACZ,WAAOC,OAAO,CAACC,GAAR,CAAYF,CAAZ,CAAP;AACC;;AACDC,EAAAA,OAAO,CAACC,GAAR,CAAYJ,QAAQ,CAACK,IAAT,CAAcC,SAA1B;AAEA,QAAM1B,MAAM,GAAGK,MAAM,CAACN,MAAP,CAAc,kCAAd,CAAf;AACAwB,EAAAA,OAAO,CAACC,GAAR,CAAYxB,MAAZ;AACAA,EAAAA,MAAM,CAAC2B,kBAAP,CAA0B;AAC1BD,IAAAA,SAAS,EAAEN,QAAQ,CAACK,IAAT,CAAcC;AADC,GAA1B,EAECE,IAFD,CAEM,UAAUC,MAAV,EAAkB,CACxB;AACA;AACA;AACD,GANC,EApCqE,CA6CrE;AACD,CA9CM","sourcesContent":["import axios from 'axios';\r\nimport Stripe from 'stripe';\r\n\r\nexport const stripe = (cartTotal, cartProducts) => async (dispatch) => {\r\n  const image = `${window.location.hostname}:3000/static/media/home-background-img.40b4543e.jpg`;\r\n\r\n  var description = \"\";\r\n\r\n  cartProducts.forEach((item, i) => {\r\n    if(i < (cartProducts.length - 1)){\r\n      description +=`${item.title} (${item.quantity}), `;\r\n    }else{\r\n      description += `and ${item.title} (${item.quantity}).`;\r\n    }\r\n  });\r\n\r\n  var name = `You are purchasing a total of ${cartTotal.quantity} items.`\r\n\r\n  //convert totalPrice into whole number\r\n  const totalPrice = cartTotal.totalPrice * 100;\r\n\r\n  const formValues = {\r\n    name: name,\r\n    description: description,\r\n    currency: cartTotal.currencyId,\r\n    totalPrice: totalPrice\r\n  }\r\n  \r\n  let response;\r\n  // const response = await contacts.post('/contacts/add', formValues);\r\n  try {\r\n   response = await axios.post('/shop/checkout', formValues);\r\n  } catch (e) {\r\n  return console.log(e);\r\n  }\r\n  console.log(response.data.sessionId);\r\n\r\n  const stripe = window.Stripe('pk_test_0kzCXvF6peItv0Z0FZ6QFG0j');\r\n  console.log(stripe);\r\n  stripe.redirectToCheckout({\r\n  sessionId: response.data.sessionId\r\n}).then(function (result) {\r\n  // If `redirectToCheckout` fails due to a browser or network\r\n  // error, display the localized error message to your customer\r\n  // using `result.error.message`.\r\n});\r\n\r\n\r\n  // history.push('/contact?success');\r\n};\r\n"]},"metadata":{},"sourceType":"module"}