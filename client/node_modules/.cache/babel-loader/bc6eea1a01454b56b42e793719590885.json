{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\John\\\\Desktop\\\\Modern React With Redux Projects\\\\beersandbrewskiesproject\\\\booksandbrewskies_dev\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\John\\\\Desktop\\\\Modern React With Redux Projects\\\\beersandbrewskiesproject\\\\booksandbrewskies_dev\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\John\\\\Desktop\\\\Modern React With Redux Projects\\\\beersandbrewskiesproject\\\\booksandbrewskies_dev\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\John\\\\Desktop\\\\Modern React With Redux Projects\\\\beersandbrewskiesproject\\\\booksandbrewskies_dev\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\John\\\\Desktop\\\\Modern React With Redux Projects\\\\beersandbrewskiesproject\\\\booksandbrewskies_dev\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import{connect}from'react-redux';import{fetchProducts}from'../../../../services/shelf/actions';import ProductList from'./components/ProductList';import ShelfHeader from'./components/ShelfHeader';import Spinner from'../../../spinner';import'./css/style.scss';var Shelf=/*#__PURE__*/function(_React$Component){_inherits(Shelf,_React$Component);function Shelf(){var _getPrototypeOf2;var _this;_classCallCheck(this,Shelf);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Shelf)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={isLoading:false,filters:_this.props.filters,sort:_this.props.sort};_this.handleFetchProducts=function(){var filters=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_this.state.filters;var sort=arguments.length>1&&arguments[1]!==undefined?arguments[1]:_this.state.sort;_this.setState({isLoading:true});_this.props.fetchProducts(filters,sort,function(){_this.setState({isLoading:false});});};return _this;}_createClass(Shelf,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.fetchProducts();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){var _this$state=this.state,nextFilters=_this$state.filters,nextSort=_this$state.sort;var filters=prevState.filters,sort=prevState.sort;if(nextFilters.length!==filters.length){this.handleFetchProducts(nextFilters,undefined);}if(nextSort!==sort){this.handleFetchProducts(undefined,nextSort);}}},{key:\"render\",value:function render(){var products=this.props.products;var isLoading=this.state.isLoading;return React.createElement(React.Fragment,null,isLoading&&React.createElement(Spinner,null),React.createElement(\"div\",{className:\"shelf-container\"},React.createElement(ShelfHeader,{productsLength:products.length}),React.createElement(ProductList,{products:products})));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(nextProps,prevState){if(nextProps.filters.length!==prevState.filters.length){return{filters:nextProps.filters};}if(nextProps.sort!==prevState.sort){return{sort:nextProps.sort};}return null;}}]);return Shelf;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{products:state.shelf.products,filters:state.filters.items,sort:state.sort.type};};export default connect(mapStateToProps,{fetchProducts:fetchProducts})(Shelf);","map":{"version":3,"sources":["C:/Users/John/Desktop/Modern React With Redux Projects/beersandbrewskiesproject/booksandbrewskies_dev/client/src/components/shop/components/shelf/index.js"],"names":["React","connect","fetchProducts","ProductList","ShelfHeader","Spinner","Shelf","state","isLoading","filters","props","sort","handleFetchProducts","setState","prevProps","prevState","nextFilters","nextSort","length","undefined","products","nextProps","Component","mapStateToProps","shelf","items","type"],"mappings":"2/BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,aAAT,KAA8B,oCAA9B,CACA,MAAOC,CAAAA,WAAP,KAAwB,0BAAxB,CACA,MAAOC,CAAAA,WAAP,KAAwB,0BAAxB,CACA,MAAOC,CAAAA,OAAP,KAAoB,kBAApB,CACA,MAAO,kBAAP,C,GAEMC,CAAAA,K,uYAQJC,K,CAAQ,CACNC,SAAS,CAAE,KADL,CAENC,OAAO,CAAE,MAAKC,KAAL,CAAWD,OAFd,CAGNE,IAAI,CAAE,MAAKD,KAAL,CAAWC,IAHX,C,OAmCVC,mB,CAAsB,UAGjB,IAFHH,CAAAA,OAEG,2DAFO,MAAKF,KAAL,CAAWE,OAElB,IADHE,CAAAA,IACG,2DADI,MAAKJ,KAAL,CAAWI,IACf,CACH,MAAKE,QAAL,CAAc,CAAEL,SAAS,CAAE,IAAb,CAAd,EACA,MAAKE,KAAL,CAAWR,aAAX,CAAyBO,OAAzB,CAAkCE,IAAlC,CAAwC,UAAM,CAC5C,MAAKE,QAAL,CAAc,CAAEL,SAAS,CAAE,KAAb,CAAd,EACD,CAFD,EAGD,C,8FArCqB,CAClB,KAAKE,KAAL,CAAWR,aAAX,GACD,C,8DAcgBY,S,CAAWC,S,CAAW,iBACU,KAAKR,KADf,CACtBS,WADsB,aAC/BP,OAD+B,CACHQ,QADG,aACTN,IADS,IAE/BF,CAAAA,OAF+B,CAEbM,SAFa,CAE/BN,OAF+B,CAEtBE,IAFsB,CAEbI,SAFa,CAEtBJ,IAFsB,CAIvC,GAAIK,WAAW,CAACE,MAAZ,GAAuBT,OAAO,CAACS,MAAnC,CAA2C,CACzC,KAAKN,mBAAL,CAAyBI,WAAzB,CAAsCG,SAAtC,EACD,CAED,GAAIF,QAAQ,GAAKN,IAAjB,CAAuB,CACrB,KAAKC,mBAAL,CAAyBO,SAAzB,CAAoCF,QAApC,EACD,CACF,C,uCAYU,IACCG,CAAAA,QADD,CACc,KAAKV,KADnB,CACCU,QADD,IAECZ,CAAAA,SAFD,CAEe,KAAKD,KAFpB,CAECC,SAFD,CAIP,MACE,qBAAC,KAAD,CAAO,QAAP,MACGA,SAAS,EAAI,oBAAC,OAAD,MADhB,CAEE,2BAAK,SAAS,CAAC,iBAAf,EACE,oBAAC,WAAD,EAAa,cAAc,CAAEY,QAAQ,CAACF,MAAtC,EADF,CAEE,oBAAC,WAAD,EAAa,QAAQ,CAAEE,QAAvB,EAFF,CAFF,CADF,CASD,C,4EAhD+BC,S,CAAWN,S,CAAW,CACtD,GAAIM,SAAS,CAACZ,OAAV,CAAkBS,MAAlB,GAA6BH,SAAS,CAACN,OAAV,CAAkBS,MAAnD,CAA2D,CACzD,MAAO,CAAET,OAAO,CAAEY,SAAS,CAACZ,OAArB,CAAP,CACD,CAED,GAAIY,SAAS,CAACV,IAAV,GAAmBI,SAAS,CAACJ,IAAjC,CAAuC,CACrC,MAAO,CAAEA,IAAI,CAAEU,SAAS,CAACV,IAAlB,CAAP,CACD,CAED,MAAO,KAAP,CACD,C,mBA5BmBX,KAAK,CAACsB,S,EAqE1B,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAhB,KAAK,QAAK,CAChCa,QAAQ,CAAEb,KAAK,CAACiB,KAAN,CAAYJ,QADU,CAEhCX,OAAO,CAAEF,KAAK,CAACE,OAAN,CAAcgB,KAFS,CAGhCd,IAAI,CAAEJ,KAAK,CAACI,IAAN,CAAWe,IAHe,CAAL,EAA7B,CAMA,cAAezB,CAAAA,OAAO,CACpBsB,eADoB,CAEpB,CAAErB,aAAa,CAAbA,aAAF,CAFoB,CAAP,CAGbI,KAHa,CAAf","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { fetchProducts } from '../../../../services/shelf/actions';\r\nimport ProductList from './components/ProductList';\r\nimport ShelfHeader from './components/ShelfHeader';\r\nimport Spinner from '../../../spinner';\r\nimport './css/style.scss';\r\n\r\nclass Shelf extends React.Component {\r\n  static propTypes = {\r\n    fetchProducts: PropTypes.func.isRequired,\r\n    products: PropTypes.array.isRequired,\r\n    filters: PropTypes.array,\r\n    sort: PropTypes.string\r\n  };\r\n\r\n  state = {\r\n    isLoading: false,\r\n    filters: this.props.filters,\r\n    sort: this.props.sort\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.props.fetchProducts();\r\n  }\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n  if (nextProps.filters.length !== prevState.filters.length) {\r\n    return { filters: nextProps.filters };\r\n  }\r\n\r\n  if (nextProps.sort !== prevState.sort) {\r\n    return { sort: nextProps.sort };\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\ncomponentDidUpdate(prevProps, prevState) {\r\n  const { filters: nextFilters, sort: nextSort } = this.state;\r\n  const { filters, sort } = prevState;\r\n\r\n  if (nextFilters.length !== filters.length) {\r\n    this.handleFetchProducts(nextFilters, undefined);\r\n  }\r\n\r\n  if (nextSort !== sort) {\r\n    this.handleFetchProducts(undefined, nextSort);\r\n  }\r\n}\r\n\r\nhandleFetchProducts = (\r\n  filters = this.state.filters,\r\n  sort = this.state.sort\r\n) => {\r\n  this.setState({ isLoading: true });\r\n  this.props.fetchProducts(filters, sort, () => {\r\n    this.setState({ isLoading: false });\r\n  });\r\n};\r\n\r\n  render() {\r\n    const { products } = this.props;\r\n    const { isLoading } = this.state;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        {isLoading && <Spinner />}\r\n        <div className=\"shelf-container\">\r\n          <ShelfHeader productsLength={products.length} />\r\n          <ProductList products={products} />\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  products: state.shelf.products,\r\n  filters: state.filters.items,\r\n  sort: state.sort.type\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { fetchProducts }\r\n)(Shelf);\r\n"]},"metadata":{},"sourceType":"module"}