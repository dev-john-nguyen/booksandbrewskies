{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\John\\\\Desktop\\\\Modern React With Redux Projects\\\\beersandbrewskiesproject\\\\booksandbrewskies\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{isEmpty}from'lodash';import StarRating from'./StarRating';import{insert_comment}from'../../../services/bb/actions';import Modal from'../../Modal';var Item=function Item(_ref){var name=_ref.name,id=_ref.id,comments=_ref.comments,image=_ref.image,custAvg=_ref.custAvg,custStar=_ref.custStar,myAvg=_ref.myAvg,myStar=_ref.myStar,myComment=_ref.myComment,handleClose=_ref.handleClose;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),formName=_useState2[0],setFormName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),formComment=_useState4[0],setFormComment=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),empty=_useState6[0],setEmpty=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],_setError=_useState8[1];var _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),commentSuccessObj=_useState10[0],setCommentSuccessObj=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),loading=_useState12[0],setLoading=_useState12[1];var handleFormSubmit=function handleFormSubmit(e){e.preventDefault();setLoading(true);if(isEmpty(formName)||isEmpty(formComment)){setEmpty(true);setLoading(false);}insert_comment(formName,formComment,id).then(function(obj){setCommentSuccessObj({name:obj.name,comment:obj.comment});setFormComment('');setLoading(false);}).catch(function(err){console.log(err);_setError(true);setLoading(false);});};if(empty){return React.createElement(Modal,{showValue:true,closeDirect:\"/bb\",buttonName:\"Back\",handleState:function handleState(){setEmpty(false);},title:\"Empty\",description:\"One of the fields are empty.\",svgType:\"empty\"});}if(error){return React.createElement(Modal,{showValue:true,closeDirect:\"/bb\",buttonName:\"Back\",handleState:function handleState(){_setError(false);handleClose();},title:\"Error\",description:\"Sorry, something went wrong\",svgType:\"error\"});}if(!isEmpty(commentSuccessObj)){comments.push(commentSuccessObj);setCommentSuccessObj({});}var mapComments=[];if(!isEmpty(comments)){mapComments=comments.map(function(item,index){return React.createElement(\"div\",{className:\"media\",key:index},React.createElement(\"img\",{src:\"./media/logo.png\",className:\"mr-3\",alt:\"BB\"}),React.createElement(\"div\",{className:\"media-body\"},React.createElement(\"p\",{className:\"mt-0 mb-0\",style:{fontSize:\"1rem\"}},item.name),React.createElement(\"p\",{className:\"text-muted\"},item.comment)));});}return React.createElement(React.Fragment,null,React.createElement(\"div\",{className:\"modal d-flex\",tabIndex:\"-1\",role:\"dialog\",id:\"main\",mousewheel:\"passive\"},React.createElement(\"div\",{className:\"position-absolute h-100 w-100\",onClick:handleClose}),React.createElement(\"div\",{className:\"modal-dialog w-100\",role:\"document\"},React.createElement(\"div\",{className:\"modal-content\",style:{height:'90vh',overflow:'auto'}},React.createElement(\"div\",{className:\"modal-header\"},React.createElement(\"div\",{className:\"row m-auto\",style:{fontSize:'.6rem'}},React.createElement(\"div\",{className:\"col\"},React.createElement(\"h5\",{className:\"modal-title\"},name),React.createElement(\"div\",{className:\"d-flex\"},React.createElement(\"p\",null,\"Our\",React.createElement(\"br\",null),\"Rating:\"),React.createElement(\"div\",{className:\"star d-flex mb-0 ml-1\"},myStar,myAvg)),React.createElement(\"div\",{className:\"d-flex\"},React.createElement(\"p\",null,\"Average\",React.createElement(\"br\",null),\"Rating:\"),React.createElement(\"div\",{className:\"star d-flex mb-0 ml-1\"},custStar,custAvg)),React.createElement(\"div\",{className:\"d-flex\"},\"Our\",React.createElement(\"br\",null),\"Comment:\",React.createElement(\"p\",{className:\"text-muted mb-0 ml-1\"},myComment))),React.createElement(\"div\",{className:\"col-7 text-right\"},React.createElement(\"img\",{src:image,className:\"img-fluid rounded shadow\",alt:\"item image\"}))),React.createElement(\"button\",{type:\"button\",className:\"close\",\"aria-label\":\"Close\",onClick:handleClose},React.createElement(\"span\",{\"aria-hidden\":\"true\"},\"\\xD7\"))),React.createElement(\"form\",{onSubmit:handleFormSubmit},React.createElement(\"div\",{className:\"modal-body\"},!isEmpty(mapComments)?mapComments:React.createElement(\"p\",null,\"No Comments\"),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Name\",name:\"Name\",onChange:function onChange(e){return setFormName(e.target.value);},value:formName,required:true})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"textarea\",{type:\"text\",className:\"form-control\",maxLength:\"500\",placeholder:\"What do you think?\",name:\"Comment\",onChange:function onChange(e){return setFormComment(e.target.value);},value:formComment,style:{minHeight:'150px'},required:true})),React.createElement(\"p\",{className:\"m-0\"},\"Rating\"),React.createElement(StarRating,{itemId:id,setError:function setError(){return _setError(true);}})),React.createElement(\"div\",{className:\"modal-footer\"},React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary btn-block\"},loading&&React.createElement(\"span\",{class:\"spinner-border spinner-border-sm mb-1\",role:\"status\",\"aria-hidden\":\"true\"}),\"Submit\")))))));};export default Item;","map":{"version":3,"sources":["C:/Users/John/Desktop/Modern React With Redux Projects/beersandbrewskiesproject/booksandbrewskies/client/src/components/BB/components/Item.js"],"names":["React","useState","isEmpty","StarRating","insert_comment","Modal","Item","name","id","comments","image","custAvg","custStar","myAvg","myStar","myComment","handleClose","formName","setFormName","formComment","setFormComment","empty","setEmpty","error","setError","commentSuccessObj","setCommentSuccessObj","loading","setLoading","handleFormSubmit","e","preventDefault","then","obj","comment","catch","err","console","log","push","mapComments","map","item","index","fontSize","height","overflow","target","value","minHeight"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { isEmpty } from 'lodash';\r\nimport StarRating from './StarRating';\r\nimport { insert_comment } from '../../../services/bb/actions';\r\nimport Modal from '../../Modal';\r\n\r\nconst Item = ({name, id, comments, image, custAvg, custStar, myAvg, myStar, myComment, handleClose}) => {\r\n    const [formName, setFormName] = useState('');\r\n    const [formComment, setFormComment] = useState('');\r\n    const [empty, setEmpty] = useState(false);\r\n    const [error, setError] = useState(false);\r\n    const [commentSuccessObj, setCommentSuccessObj] = useState({});\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const handleFormSubmit = (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        if(isEmpty(formName) || isEmpty(formComment)){\r\n            setEmpty(true);\r\n            setLoading(false);\r\n        }\r\n\r\n        insert_comment(formName, formComment, id)\r\n            .then((obj) => {\r\n                setCommentSuccessObj({name: obj.name, comment: obj.comment});\r\n                setFormComment('');\r\n                setLoading(false);\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n                setError(true);\r\n                setLoading(false);\r\n            });\r\n    }\r\n\r\n    if(empty){\r\n        return (\r\n            <Modal\r\n                showValue={true}\r\n                closeDirect='/bb'\r\n                buttonName='Back'\r\n                handleState={() => {\r\n                    setEmpty(false);\r\n                }}\r\n                title='Empty'\r\n                description='One of the fields are empty.'\r\n                svgType=\"empty\"\r\n            />\r\n        )\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <Modal\r\n                showValue={true}\r\n                closeDirect='/bb'\r\n                buttonName='Back'\r\n                handleState={() => {\r\n                    setError(false);\r\n                    handleClose()\r\n                }}\r\n                title='Error'\r\n                description='Sorry, something went wrong'\r\n                svgType=\"error\"\r\n            />\r\n        )\r\n    }\r\n\r\n\r\n    \r\n    if(!isEmpty(commentSuccessObj)) {\r\n        comments.push(commentSuccessObj);\r\n        setCommentSuccessObj({});\r\n    }\r\n\r\n    let mapComments = [];\r\n\r\n    if(!isEmpty(comments)){\r\n        mapComments = comments.map((item, index) => {\r\n            return (\r\n                <div className=\"media\" key={index}>\r\n                    <img src=\"./media/logo.png\" className=\"mr-3\" alt=\"BB\" />\r\n                    <div className=\"media-body\">\r\n                        <p className=\"mt-0 mb-0\" style={{fontSize: \"1rem\"}}>{item.name}</p>\r\n                        <p className=\"text-muted\">{item.comment}</p>\r\n                    </div>\r\n                </div>\r\n            )\r\n        });               \r\n    }\r\n\r\n    return (\r\n        <>\r\n        <div className=\"modal d-flex\" tabIndex=\"-1\" role=\"dialog\" id='main' mousewheel='passive'>\r\n            <div className=\"position-absolute h-100 w-100\" onClick={handleClose}/>\r\n            <div className=\"modal-dialog w-100\" role=\"document\">\r\n                <div className=\"modal-content\" style={{height: '90vh', overflow: 'auto'}}>\r\n                    <div className=\"modal-header\">\r\n                        <div className=\"row m-auto\" style={{fontSize: '.6rem'}}>\r\n                            <div className=\"col\">\r\n                                <h5 className=\"modal-title\">{name}</h5>\r\n                                <div className=\"d-flex\"><p>Our<br/>Rating:</p><div className=\"star d-flex mb-0 ml-1\">{myStar}{myAvg}</div></div>\r\n                                <div className=\"d-flex\"><p>Average<br/>Rating:</p><div className=\"star d-flex mb-0 ml-1\">{custStar}{custAvg}</div></div>\r\n                                <div className=\"d-flex\">Our<br />Comment:<p className=\"text-muted mb-0 ml-1\">{myComment}</p></div>\r\n                                </div>\r\n                                <div className=\"col-7 text-right\"><img src={image} className=\"img-fluid rounded shadow\" alt=\"item image\" /></div>\r\n                        </div>\r\n                        <button type=\"button\" className=\"close\" aria-label=\"Close\" onClick={handleClose}>\r\n                            <span aria-hidden=\"true\">&times;</span>\r\n                        </button>\r\n                    </div>\r\n                    <form onSubmit={handleFormSubmit}>\r\n                        <div className=\"modal-body\">\r\n                            {(!isEmpty(mapComments)) ? mapComments : <p>No Comments</p>}\r\n                            <div className=\"form-group\">\r\n                                <input type=\"text\"\r\n                                    className=\"form-control\"\r\n                                    placeholder=\"Name\" name=\"Name\"\r\n                                    onChange={(e) => setFormName(e.target.value)}\r\n                                    value={formName}\r\n                                    required />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <textarea type=\"text\"\r\n                                    className=\"form-control\"\r\n                                    maxLength='500'\r\n                                    placeholder=\"What do you think?\"\r\n                                    name=\"Comment\"\r\n                                    onChange={(e) => setFormComment(e.target.value)}\r\n                                    value={formComment} style={{ minHeight: '150px' }}\r\n                                    required />\r\n                            </div>\r\n                            <p className=\"m-0\">Rating</p>\r\n                            <StarRating itemId={id} setError={() => setError(true)} />\r\n                        </div>\r\n                        <div className=\"modal-footer\">\r\n                            <button type=\"submit\" className='btn btn-primary btn-block'>\r\n                                {loading && <span class=\"spinner-border spinner-border-sm mb-1\" role=\"status\" aria-hidden=\"true\"></span>}\r\n                            Submit\r\n                            </button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Item;"]},"metadata":{},"sourceType":"module"}