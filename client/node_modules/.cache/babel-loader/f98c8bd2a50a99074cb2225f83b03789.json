{"ast":null,"code":"import jsonApi from '../../apis/api';\nimport axios from 'axios';\nimport { FETCH_PRODUCTS } from './actionTypes'; // export const fetchProducts = () => async dispatch => {\n//   const response = await jsonApi.get('/products')\n//\n//   dispatch({ type: FETCH_PRODUCTS, payload: response.data });\n// }\n\nexport const fetchProducts = (filters, sortBy, callback) => dispatch => {\n  return axios.get(jsonApi).then(res => {\n    let products = res.data.products;\n\n    if (!!filters && filters.length > 0) {\n      products = products.filter(p => filters.find(f => p.availableSizes.find(size => size === f)));\n    }\n\n    if (!!sortBy) {\n      products = products.sort(compare[sortBy]);\n    }\n\n    if (!!callback) {\n      callback();\n    }\n\n    return dispatch({\n      type: FETCH_PRODUCTS,\n      payload: products\n    });\n  }).catch(err => {\n    console.log('Could not fetch products. Try again later.');\n  });\n};","map":{"version":3,"sources":["C:/Users/John/Desktop/Modern React With Redux Projects/beersandbrewskies/beersandbrewskies/src/services/shelf/actions.js"],"names":["jsonApi","axios","FETCH_PRODUCTS","fetchProducts","filters","sortBy","callback","dispatch","get","then","res","products","data","length","filter","p","find","f","availableSizes","size","sort","compare","type","payload","catch","err","console","log"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,gBAApB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,cAAT,QAA+B,eAA/B,C,CAEA;AACA;AACA;AACA;AACA;;AAEA,OAAO,MAAMC,aAAa,GAAG,CAACC,OAAD,EAAUC,MAAV,EAAkBC,QAAlB,KAA+BC,QAAQ,IAAI;AACtE,SAAON,KAAK,CACTO,GADI,CACAR,OADA,EAEJS,IAFI,CAECC,GAAG,IAAI;AAAA,QACLC,QADK,GACQD,GAAG,CAACE,IADZ,CACLD,QADK;;AAGX,QAAI,CAAC,CAACP,OAAF,IAAaA,OAAO,CAACS,MAAR,GAAiB,CAAlC,EAAqC;AACnCF,MAAAA,QAAQ,GAAGA,QAAQ,CAACG,MAAT,CAAgBC,CAAC,IAC1BX,OAAO,CAACY,IAAR,CAAaC,CAAC,IAAIF,CAAC,CAACG,cAAF,CAAiBF,IAAjB,CAAsBG,IAAI,IAAIA,IAAI,KAAKF,CAAvC,CAAlB,CADS,CAAX;AAGD;;AAED,QAAI,CAAC,CAACZ,MAAN,EAAc;AACZM,MAAAA,QAAQ,GAAGA,QAAQ,CAACS,IAAT,CAAcC,OAAO,CAAChB,MAAD,CAArB,CAAX;AACD;;AAED,QAAI,CAAC,CAACC,QAAN,EAAgB;AACdA,MAAAA,QAAQ;AACT;;AAED,WAAOC,QAAQ,CAAC;AACde,MAAAA,IAAI,EAAEpB,cADQ;AAEdqB,MAAAA,OAAO,EAAEZ;AAFK,KAAD,CAAf;AAID,GAvBI,EAwBJa,KAxBI,CAwBEC,GAAG,IAAI;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAY,4CAAZ;AACD,GA1BI,CAAP;AA2BD,CA5BM","sourcesContent":["import jsonApi from '../../apis/api';\r\nimport axios from 'axios';\r\nimport { FETCH_PRODUCTS } from './actionTypes';\r\n\r\n// export const fetchProducts = () => async dispatch => {\r\n//   const response = await jsonApi.get('/products')\r\n//\r\n//   dispatch({ type: FETCH_PRODUCTS, payload: response.data });\r\n// }\r\n\r\nexport const fetchProducts = (filters, sortBy, callback) => dispatch => {\r\n  return axios\r\n    .get(jsonApi)\r\n    .then(res => {\r\n      let { products } = res.data;\r\n\r\n      if (!!filters && filters.length > 0) {\r\n        products = products.filter(p =>\r\n          filters.find(f => p.availableSizes.find(size => size === f))\r\n        );\r\n      }\r\n\r\n      if (!!sortBy) {\r\n        products = products.sort(compare[sortBy]);\r\n      }\r\n\r\n      if (!!callback) {\r\n        callback();\r\n      }\r\n\r\n      return dispatch({\r\n        type: FETCH_PRODUCTS,\r\n        payload: products\r\n      });\r\n    })\r\n    .catch(err => {\r\n      console.log('Could not fetch products. Try again later.');\r\n    });\r\n};\r\n"]},"metadata":{},"sourceType":"module"}