{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\John\\\\Desktop\\\\Modern React With Redux Projects\\\\beersandbrewskiesproject\\\\booksandbrewskies\\\\client\\\\node_modules\\\\@babel\\\\runtime/regenerator\";// import jsonApi from '../../apis/api';\nimport axios from'axios';import{FETCH_PRODUCTS}from'./actionTypes';var compare={lowestprice:function lowestprice(a,b){if(a.price<b.price)return-1;if(a.price>b.price)return 1;return 0;},highestprice:function highestprice(a,b){if(a.price>b.price)return-1;if(a.price<b.price)return 1;return 0;}};export var fetchProducts=function fetchProducts(filters,sortBy,callback){return function _callee(dispatch){var response,products;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _regeneratorRuntime.awrap(axios.get('/products'));case 3:response=_context.sent;_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);return _context.abrupt(\"return\",console.log(_context.t0.response));case 9:products=response.data;if(!!filters&&filters.length>0){products=products.filter(function(p){return filters.find(function(f){return p.availableSizes.find(function(size){return size===f;});});});}if(!!sortBy){products=products.sort(compare[sortBy]);}if(!!callback){callback();}dispatch({type:FETCH_PRODUCTS,payload:products});case 14:case\"end\":return _context.stop();}}},null,null,[[0,6]]);};};// export const fetchProducts = (filters, sortBy, callback) => dispatch => {\n//   return axios\n//     .get(productsAPI)\n//     .then(res => {\n//       let { products } = res.data;\n//\n//       if (!!filters && filters.length > 0) {\n//         products = products.filter(p =>\n//           filters.find(f => p.availableSizes.find(size => size === f))\n//         );\n//       }\n//\n//       if (!!sortBy) {\n//         products = products.sort(compare[sortBy]);\n//       }\n//\n//       if (!!callback) {\n//         callback();\n//       }\n//\n//       return dispatch({\n//         type: FETCH_PRODUCTS,\n//         payload: products\n//       });\n//     })\n//     .catch(err => {\n//       console.log('Could not fetch products. Try again later.');\n//     });\n// };","map":{"version":3,"sources":["C:/Users/John/Desktop/Modern React With Redux Projects/beersandbrewskiesproject/booksandbrewskies/client/src/services/shelf/actions.js"],"names":["axios","FETCH_PRODUCTS","compare","lowestprice","a","b","price","highestprice","fetchProducts","filters","sortBy","callback","dispatch","get","response","console","log","products","data","length","filter","p","find","f","availableSizes","size","sort","type","payload"],"mappings":"4LAAA;AACA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,cAAT,KAA+B,eAA/B,CAEA,GAAMC,CAAAA,OAAO,CAAG,CACdC,WAAW,CAAE,qBAACC,CAAD,CAAIC,CAAJ,CAAU,CACrB,GAAID,CAAC,CAACE,KAAF,CAAUD,CAAC,CAACC,KAAhB,CAAuB,MAAO,CAAC,CAAR,CACvB,GAAIF,CAAC,CAACE,KAAF,CAAUD,CAAC,CAACC,KAAhB,CAAuB,MAAO,EAAP,CACvB,MAAO,EAAP,CACD,CALa,CAMdC,YAAY,CAAE,sBAACH,CAAD,CAAIC,CAAJ,CAAU,CACtB,GAAID,CAAC,CAACE,KAAF,CAAUD,CAAC,CAACC,KAAhB,CAAuB,MAAO,CAAC,CAAR,CACvB,GAAIF,CAAC,CAACE,KAAF,CAAUD,CAAC,CAACC,KAAhB,CAAuB,MAAO,EAAP,CACvB,MAAO,EAAP,CACD,CAVa,CAAhB,CAaA,MAAO,IAAME,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,OAAD,CAAUC,MAAV,CAAkBC,QAAlB,QAA+B,kBAAMC,QAAN,0MAIxCZ,KAAK,CAACa,GAAN,CAAU,WAAV,CAJwC,SAIzDC,QAJyD,6HAMjDC,OAAO,CAACC,GAAR,CAAY,YAAEF,QAAd,CANiD,SAStDG,QATsD,CAS3CH,QAAQ,CAACI,IATkC,CAWxD,GAAI,CAAC,CAACT,OAAF,EAAaA,OAAO,CAACU,MAAR,CAAiB,CAAlC,CAAqC,CACnCF,QAAQ,CAAGA,QAAQ,CAACG,MAAT,CAAgB,SAAAC,CAAC,QAC1BZ,CAAAA,OAAO,CAACa,IAAR,CAAa,SAAAC,CAAC,QAAIF,CAAAA,CAAC,CAACG,cAAF,CAAiBF,IAAjB,CAAsB,SAAAG,IAAI,QAAIA,CAAAA,IAAI,GAAKF,CAAb,EAA1B,CAAJ,EAAd,CAD0B,EAAjB,CAAX,CAGD,CAED,GAAI,CAAC,CAACb,MAAN,CAAc,CACZO,QAAQ,CAAGA,QAAQ,CAACS,IAAT,CAAcxB,OAAO,CAACQ,MAAD,CAArB,CAAX,CACD,CAED,GAAI,CAAC,CAACC,QAAN,CAAgB,CACdA,QAAQ,GACT,CAEHC,QAAQ,CAAC,CAAEe,IAAI,CAAE1B,cAAR,CAAwB2B,OAAO,CAAEX,QAAjC,CAAD,CAAR,CAzB0D,iEAA/B,EAAtB,CA4BP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["// import jsonApi from '../../apis/api';\r\nimport axios from 'axios';\r\nimport { FETCH_PRODUCTS } from './actionTypes';\r\n\r\nconst compare = {\r\n  lowestprice: (a, b) => {\r\n    if (a.price < b.price) return -1;\r\n    if (a.price > b.price) return 1;\r\n    return 0;\r\n  },\r\n  highestprice: (a, b) => {\r\n    if (a.price > b.price) return -1;\r\n    if (a.price < b.price) return 1;\r\n    return 0;\r\n  }\r\n};\r\n\r\nexport const fetchProducts = (filters, sortBy, callback) => async dispatch => {\r\n  let response;\r\n\r\n  try {\r\n   response = await axios.get('/products');\r\n  } catch (e) {\r\n    return console.log(e.response);\r\n  }\r\n\r\n  let products = response.data;\r\n\r\n    if (!!filters && filters.length > 0) {\r\n      products = products.filter(p =>\r\n        filters.find(f => p.availableSizes.find(size => size === f))\r\n      );\r\n    }\r\n\r\n    if (!!sortBy) {\r\n      products = products.sort(compare[sortBy]);\r\n    }\r\n\r\n    if (!!callback) {\r\n      callback();\r\n    }\r\n\r\n  dispatch({ type: FETCH_PRODUCTS, payload: products });\r\n}\r\n\r\n// export const fetchProducts = (filters, sortBy, callback) => dispatch => {\r\n//   return axios\r\n//     .get(productsAPI)\r\n//     .then(res => {\r\n//       let { products } = res.data;\r\n//\r\n//       if (!!filters && filters.length > 0) {\r\n//         products = products.filter(p =>\r\n//           filters.find(f => p.availableSizes.find(size => size === f))\r\n//         );\r\n//       }\r\n//\r\n//       if (!!sortBy) {\r\n//         products = products.sort(compare[sortBy]);\r\n//       }\r\n//\r\n//       if (!!callback) {\r\n//         callback();\r\n//       }\r\n//\r\n//       return dispatch({\r\n//         type: FETCH_PRODUCTS,\r\n//         payload: products\r\n//       });\r\n//     })\r\n//     .catch(err => {\r\n//       console.log('Could not fetch products. Try again later.');\r\n//     });\r\n// };\r\n"]},"metadata":{},"sourceType":"module"}